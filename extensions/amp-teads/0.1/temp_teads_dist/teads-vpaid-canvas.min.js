Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var a=Object.prototype.toString,b={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},c=function(a){return b[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)},d=/[\\"\u0000-\u001F\u2028\u2029]/g;return function e(b){if(null==b)return"null";if("number"==typeof b)return isFinite(b)?b.toString():"null";if("boolean"==typeof b)return b.toString();if("object"==typeof b){if("function"==typeof b.toJSON)return e(b.toJSON());if(Array.isArray(b)){for(var f="[",g=0;g<b.length;g++)f+=(g?", ":"")+e(b[g]);return f+"]"}if("[object Object]"===a.call(b)){var h=[];for(var i in b)b.hasOwnProperty(i)&&h.push(e(i)+": "+e(b[i]));return"{"+h.join(", ")+"}"}}return'"'+b.toString().replace(d,c)+'"'}}()}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var teads;!function(a){var b=function(){function a(){}return a.find=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("predicate must be a function");for(var d,e=Object(a),f=e.length>>>0,g=0;f>g;g++)if(d=e[g],b.call(c,d,g,e))return d},a.forEach=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");for(var d,e=Object(a),f=e.length>>>0,g=0;f>g;)g in e&&(d=e[g],b.call(c,d,g,e)),g++},a.filter=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");var d=Object(a),e=d.length>>>0;if(e>d.length)throw new TypeError("negative length");for(var f=[],g=0;e>g;g++)if(g in d){var h=d[g];b.call(c,h,g,d)&&f.push(h)}return f},a.some=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");var d=Object(a),e=d.length>>>0;if(e>d.length)throw new TypeError("negative length");for(var f=0;e>f;f++)if(f in d&&b.call(c,d[f],f,d))return!0;return!1},a.indexOf=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");var d=Object(a),e=d.length>>>0;if(0===e)return-1;var f=+c||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(var g=Math.max(f>=0?f:e-Math.abs(f),0);e>g;){if(g in d&&d[g]===b)return g;g++}return-1},a.map=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");for(var d,e,f=Object(a),g=f.length>>>0,h=new Array(g),i=0;g>i;)i in f&&(d=f[i],e=b.call(c,d,i,f),h[i]=e),i++;return h},a.unique=function(a){if(null==a)throw new TypeError("array is null or undefined");var b={};return this.filter(a,function(a){return!(b[a]=++b[a]||0)})},a}();a.ArrayHelper=b}(teads||(teads={}));var teads;!function(a){var b=function(){function a(){}return a.isURL=function(a){var b=/^\(?((?:(http|https|ftp):\/\/)|\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#]*))?([\#][^\s\n]*)?\)?$/i;return"string"==typeof a&&b.test(a)},a.pad=function(a,b){void 0===b&&(b="00");var c=String(a);return b.substring(0,b.length-c.length)+c},a.ucfirst=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},a.rand=function(a,b){void 0===b&&(b=!0);for(var c=b?"0123456789":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d="",e=0;a>e;e++)d+=c.charAt(Math.floor(Math.random()*c.length));return d},a.trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},a.separate=function(a){void 0===a&&(a="|");for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=!0,e=0;d&&e<b.length;)d=d&&!b[e],e++;return d?"":b.join(a)},a}();a.StringHelper=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.seconds=function(a){if(!a)return NaN;var b=a.split("."),c=b[0].split(":"),d=3600*Number(c[0])+60*Number(c[1])+Number(c[2]);return 2===b.length&&(d=Number(d+"."+b[1])),d},b.offset=function(b){void 0===b&&(b=0);var c=b?Math.floor(b/3600):0;b-=3600*c;var d=b?Math.floor(b/60):0;b-=60*d;var e=(b%1).toFixed(3).substr(1);return b=Math.floor(b),a.StringHelper.pad(c)+":"+a.StringHelper.pad(d)+":"+a.StringHelper.pad(b)+e},b.hasFlash=function(){var a="Shockwave",b="Flash";try{a=new ActiveXObject(a+b+"."+a+b)}catch(c){a=navigator.plugins[a+" "+b]}return!!a},b.hasFlashVersion=function(a){return Number(this.getFlashVersion()[0])>=a},b.getFlashVersion=function(){try{try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(b){return["6","0","0"]}}catch(c){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(d){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(e){}}return["0","0","0"]},b.getAudioContext=function(){return window.AudioContext||window.webkitAudioContext},b.extend=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];for(var d={},e=0,f=void 0;e<a.length;e++){f=a[e];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&("[object Object]"===Object.prototype.toString.call(f[g])?d[g]=b.extend(d[g],f[g]):void 0!==f[g]&&(d[g]=f[g]))}return d},b.throttle=function(a,b,c){var d=!1;return b=b||250,c=c||this,function(){d||(a.apply(c,arguments),window.setTimeout(function(){d=!1},b),d=!0)}},b.safeUrl=function(a){var b=document.createElement("a");return b.href=a,window.swInstalled&&/(teads|ebu?z)/.test(b.hostname)?"/"+btoa(a).replace(/=/g,"_"):a},b.getProtocol=function(){return location&&location.protocol&&0===location.protocol.indexOf("http")?location.protocol:"https:"},b}();a.Utils=b}(teads||(teads={}));var teads;!function(a){var b=function(){function a(){}return a.get=function(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},a.set=function(a,b,c){var d=c?"; expires="+c.toUTCString():"; expires=Tue, 19 Jan 2038 03:14:07 GMT";document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+d+"; path=/"},a}();a.Cookie=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.MODEL="model",b.NAME="name",b.TYPE="type",b.VENDOR="vendor",b.VERSION="version",b.CONSOLE="console",b.MOBILE="mobile",b.TABLET="tablet",b.SMARTTV="smarttv",b.WEARABLE="wearable",b.DESKTOP="desktop",b.util={extend:function(a,b){for(var c in b)-1!=="browser device os".indexOf(c)&&b[c].length%2===0&&(a[c]=b[c].concat(a[c]));return a},has:function(a,b){return"string"==typeof a?-1!==b.toLowerCase().indexOf(a.toLowerCase()):!1},lowerize:function(a){return a.toLowerCase()}},b.mapper={rgx:function(){for(var b,c,d,e,f,g,h,i=0,j=arguments;i<j.length&&!g;){var k=j[i],l=j[i+1];if("undefined"==typeof b){b={};for(e in l)f=l[e],"object"==typeof f?b[f[0]]=void 0:b[f]=void 0}for(c=d=0;c<k.length&&!g;)if(g=k[c++].exec(a.Context.getUA()))for(e=0;e<l.length;e++)h=g[++d],f=l[e],"object"==typeof f&&f.length>0?2==f.length?"function"==typeof f[1]?b[f[0]]=f[1].call(this,h):b[f[0]]=f[1]:3==f.length?"function"!=typeof f[1]||f[1].exec&&f[1].test?b[f[0]]=h?h.replace(f[1],f[2]):void 0:b[f[0]]=h?f[1].call(this,h,f[2]):void 0:4==f.length&&(b[f[0]]=h?f[3].call(this,h.replace(f[1],f[2])):void 0):b[f]=h?h:void 0;i+=2}return b},str:function(a,c){for(var d in c)if("object"==typeof c[d]&&c[d].length>0){for(var e=0;e<c[d].length;e++)if(b.util.has(c[d][e],a))return"?"===d?void 0:d}else if(b.util.has(c[d],a))return"?"===d?void 0:d;return a}},b.maps={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b.regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[b.NAME,b.VERSION],[/\s(opr)\/([\w\.]+)/i],[[b.NAME,"Opera"],b.VERSION],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium)\/([\w\.-]+)/i],[b.NAME,b.VERSION],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[b.NAME,"IE"],b.VERSION],[/(edge)\/((\d+)?[\w\.]+)/i],[b.NAME,b.VERSION],[/(yabrowser)\/([\w\.]+)/i],[[b.NAME,"Yandex"],b.VERSION],[/(comodo_dragon)\/([\w\.]+)/i],[[b.NAME,/_/g," "],b.VERSION],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[b.NAME,b.VERSION],[/(dolfin)\/([\w\.]+)/i],[[b.NAME,"Dolphin"],b.VERSION],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[b.NAME,"Chrome"],b.VERSION],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[b.VERSION,[b.NAME,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[b.VERSION,[b.NAME,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[b.VERSION,[b.NAME,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[b.VERSION,[b.NAME,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[b.VERSION,b.NAME],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[b.NAME,[b.VERSION,b.mapper.str,b.maps.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[b.NAME,b.VERSION],[/(navigator|netscape)\/([\w\.-]+)/i],[[b.NAME,"Netscape"],b.VERSION],[/fxios\/([\w\.-]+)/i],[b.VERSION,[b.NAME,"Firefox"]],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[b.NAME,b.VERSION]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[b.MODEL,b.VENDOR,[b.TYPE,b.TABLET]],[/applecoremedia\/[\w\.]+ \((ipad)/],[b.MODEL,[b.VENDOR,"Apple"],[b.TYPE,b.TABLET]],[/(apple\s{0,1}tv)/i],[[b.MODEL,"Apple TV"],[b.VENDOR,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[b.VENDOR,b.MODEL,[b.TYPE,b.TABLET]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[b.MODEL,[b.VENDOR,"Amazon"],[b.TYPE,b.TABLET]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[b.MODEL,b.mapper.str,b.maps.device.amazon.model],[b.VENDOR,"Amazon"],[b.TYPE,b.MOBILE]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[b.MODEL,b.VENDOR,[b.TYPE,b.MOBILE]],[/\((ip[honed|\s\w*]+);/i],[b.MODEL,[b.VENDOR,"Apple"],[b.TYPE,b.MOBILE]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[b.VENDOR,b.MODEL,[b.TYPE,b.MOBILE]],[/\(bb10;\s(\w+)/i],[b.MODEL,[b.VENDOR,"BlackBerry"],[b.TYPE,b.MOBILE]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[b.MODEL,[b.VENDOR,"Asus"],[b.TYPE,b.TABLET]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[b.VENDOR,"Sony"],[b.MODEL,"Xperia Tablet"],[b.TYPE,b.TABLET]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[b.VENDOR,"Sony"],[b.MODEL,"Xperia Phone"],[b.TYPE,b.MOBILE]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[b.VENDOR,b.MODEL,[b.TYPE,b.CONSOLE]],[/android.+;\s(shield)\sbuild/i],[b.MODEL,[b.VENDOR,"Nvidia"],[b.TYPE,b.CONSOLE]],[/(playstation\s[3portablevi]+)/i],[b.MODEL,[b.VENDOR,"Sony"],[b.TYPE,b.CONSOLE]],[/(sprint\s(\w+))/i],[[b.VENDOR,b.mapper.str,b.maps.device.sprint.vendor],[b.MODEL,b.mapper.str,b.maps.device.sprint.model],[b.TYPE,b.MOBILE]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[b.VENDOR,b.MODEL,[b.TYPE,b.TABLET]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[b.VENDOR,[b.MODEL,/_/g," "],[b.TYPE,b.MOBILE]],[/(nexus\s9)/i],[b.MODEL,[b.VENDOR,"HTC"],[b.TYPE,b.TABLET]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[b.MODEL,[b.VENDOR,"Microsoft"],[b.TYPE,b.CONSOLE]],[/(kin\.[onetw]{3})/i],[[b.MODEL,/\./g," "],[b.VENDOR,"Microsoft"],[b.TYPE,b.MOBILE]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i],[b.MODEL,[b.VENDOR,"Motorola"],[b.TYPE,b.MOBILE]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[b.MODEL,[b.VENDOR,"Motorola"],[b.TYPE,b.TABLET]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[b.VENDOR,"Samsung"],b.MODEL,[b.TYPE,b.TABLET]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[b.VENDOR,"Samsung"],b.MODEL,[b.TYPE,b.MOBILE]],[/(samsung);smarttv/i],[b.VENDOR,b.MODEL,[b.TYPE,b.SMARTTV]],[/\(dtv[\);].+(aquos)/i],[b.MODEL,[b.VENDOR,"Sharp"],[b.TYPE,b.SMARTTV]],[/sie-(\w+)*/i],[b.MODEL,[b.VENDOR,"Siemens"],[b.TYPE,b.MOBILE]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[b.VENDOR,"Nokia"],b.MODEL,[b.TYPE,b.MOBILE]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[b.MODEL,[b.VENDOR,"Acer"],[b.TYPE,b.TABLET]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[b.VENDOR,"LG"],b.MODEL,[b.TYPE,b.TABLET]],[/(lg) netcast\.tv/i],[b.VENDOR,b.MODEL,[b.TYPE,b.SMARTTV]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[b.MODEL,[b.VENDOR,"LG"],[b.TYPE,b.MOBILE]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[b.MODEL,[b.VENDOR,"Lenovo"],[b.TYPE,b.TABLET]],[/linux;.+((jolla));/i],[b.VENDOR,b.MODEL,[b.TYPE,b.MOBILE]],[/((pebble))app\/[\d\.]+\s/i],[b.VENDOR,b.MODEL,[b.TYPE,b.WEARABLE]],[/android.+;\s(glass)\s\d/i],[b.MODEL,[b.VENDOR,"Google"],[b.TYPE,b.WEARABLE]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[b.MODEL,/_/g," "],[b.VENDOR,"Xiaomi"],[b.TYPE,b.MOBILE]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[b.TYPE,b.util.lowerize],b.VENDOR,b.MODEL]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[b.NAME,b.VERSION],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[b.NAME,[b.VERSION,b.mapper.str,b.maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[b.NAME,"Windows"],[b.VERSION,b.mapper.str,b.maps.os.windows.version]],[/\((bb)(10);/i],[[b.NAME,"BlackBerry"],b.VERSION],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[b.NAME,b.VERSION],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[b.NAME,"Symbian"],b.VERSION],[/\((series40);/i],[b.NAME],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[b.NAME,"Firefox OS"],b.VERSION],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[b.NAME,b.VERSION],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[b.NAME,"Chromium OS"],b.VERSION],[/(sunos)\s?([\w\.]+\d)*/i],[[b.NAME,"Solaris"],b.VERSION],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[b.NAME,b.VERSION],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[b.NAME,"iOS"],[b.VERSION,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[b.NAME,"Mac OS"],[b.VERSION,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[b.NAME,b.VERSION]]},b}();a.Ua=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(a){this.name=a.name||"",this.version=a.version||"",this.major="string"==typeof this.version?this.version.split(".")[0]:""}return b.prototype.toString=function(){return a.StringHelper.separate("|",this.name,this.version).toLowerCase()},b}();a.UABrowser=b;var c=function(){function b(a){this.name=a.name||"",this.version=a.version||""}return b.prototype.toString=function(){return a.StringHelper.separate("|",this.name,this.version).toLowerCase()},b}();a.UAOs=c;var d=function(){function b(b){this.typeRegExp=/^windows|mac\s+os|\.*linux\.*|\.*bsd\.*|dragonfly|chromium\s+os|haiku$/i,this.model=b.model||"",this.type=b.type||(this.typeRegExp.test(e.getOS().name)?a.Ua.DESKTOP:""),this.vendor=b.vendor||""}return b.prototype.toString=function(){return a.StringHelper.separate("|",this.model,this.type,this.vendor).toLowerCase()},b}();a.UADevice=d;var e=function(){function e(){}return e.isDesktop=function(){return!e.isMobile()&&!e.isTablet()},e.isIpad=function(){return"iPad"===e.getDevice().model||/iPad/i.test(e.getUA())},e.isTablet=function(){return"tablet"===e.getDevice().type||e.isIpad()||e.isAndroid()&&!/(m|M)obile/.test(e.getUA())},e.isMobile=function(){return"mobile"===e.getDevice().type||e.isIos()&&!e.isIpad()||e.isAndroid()&&/(m|M)obile/.test(e.getUA())},e.isChromeIos=function(){return/CriOS/i.test(e.getUA())},e.isFacebookWebview=function(){return"Facebook"===e.getBrowser().name||/FBAN|FBIOS|FBAV|FBBV|FBDV|FBMD|FBSN|FBSV|FBSS|FBCR|FBID|FBLC|FBOP/i.test(e.getUA())},e.isAndroidNative=function(){return"Android Browser"===e.getBrowser().name},e.isAndroid=function(){return"Android"===e.getOS().name||/Android/i.test(e.getUA())},e.isIos=function(){return"iOS"===e.getOS().name||e.isIpad()||e.isIphone()},e.isIphone=function(){return"iPhone"===e.getDevice().model||/iPhone/i.test(e.getUA())},e.isAndroidMobile=function(){return e.isAndroid()&&e.isMobile()},e.isOldIE=function(a){return void 0===a&&(a=9),e.isIE()&&e.getBrowser().major&&parseInt(e.getBrowser().major,10)<=a},e.isIE=function(){return"IE"===e.getBrowser().name||/MSIE|Trident/.test(e.getUA())},e.isChrome=function(){return"Chrome"===e.getBrowser().name||!!window.chrome},e.isFirefox=function(){return"Firefox"===e.getBrowser().name||/Firefox/i.test(e.getUA())},e.getIEVersion=function(){return e.isIE()&&e.getBrowser().major?parseInt(e.getBrowser().major,10):null},e.getAndroidVersion=function(){return e.isAndroid()?parseInt(e.getOS().version.split(".").join(),10):null},e.getIosVersion=function(){return e.isIos()?parseInt(e.getOS().version.split(".").join(),10):null},e.isUIWebview=function(){return(e.isIphone()||e.isIpad())&&!/Safari/i.test(e.getUA())&&!window.navigator.standalone},e.videoSupport=function(a){return!!a.createElement("video").canPlayType},e.getLanguage=function(){return(window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en").substr(0,2)},e.getUA=function(){return e.userAgent},e.getDevice=function(){return this.device||(this.device=new d(a.Ua.mapper.rgx.apply(this,a.Ua.regexes.device))),this.device},e.getOS=function(){return this.os||(this.os=new c(a.Ua.mapper.rgx.apply(this,a.Ua.regexes.os))),this.os},e.getBrowser=function(){return this.browser||(this.browser=new b(a.Ua.mapper.rgx.apply(this,a.Ua.regexes.browser))),this.browser},e.userAgent=navigator.userAgent,e}();a.Context=e}(teads||(teads={}));var teads;!function(a){function b(){var b=a.Cookie.get("teadsDebugLevel");b&&(d=b.split(","),a.ArrayHelper.indexOf(d,"all")>=0&&(d=["debug","info","warn","error"]));var f=a.Cookie.get("teadsDebugNamespace");f&&(e=f.split(",")),d.length&&!a.Logger&&(a.Context.isIE()?(c.log("Teads Media Framework > Debug mode"),c.log("Package: teads-vpaid-video v0.5.9")):(c.log("%cTeads Media Framework %c> Debug mode","color:#7ebde5;font-family:Helvetica,sans-serif;font-size:2em;","color:#aaa;font-family:Helvetica,sans-serif;font-size:2em;"),c.log("%cPackage: teads-vpaid-video v0.5.9","color:#7ebde5;font-style:italic;")))}a.START_TIME=a.START_TIME||Date.now();var c,d=[],e=[],f=function(){function a(){}return a.prototype.log=function(){},a}();c=window.console&&console.log?window.console:new f,b();var g=function(){function f(a){this.namespace=a,this.console=c}return f.prototype._log=function(g,h){var i=this;if(b(),h.length&&!(a.ArrayHelper.indexOf(d,g)<0)){if(e.length){var j=a.ArrayHelper.some(e,function(a){return 0===i.namespace.indexOf(a)});if(!j)return}var k=Date.now()-a.START_TIME,l=(k/1e3).toFixed(3)+"s";f.logs.push({level:g,message:l+" ["+this.namespace+"] "+h.join(" ")}),a.Context.isIE()?h=[l+" ["+this.namespace+"] "+h.join(" ")]:h.unshift("%c"+l+" "+this.namespace,"color:#7ebde5;");var m=c[g]||c.log;try{m.apply(c,h)}catch(n){Function.prototype.apply.apply(m,[c,h])}}},f.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("debug",a)},f.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("info",a)},f.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("warn",a)},f.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("error",a)},f.prototype.table=function(a){c.table&&c.table(a)},f.getLogs=function(){return f.logs},f.clear=function(){f.logs=[]},f.logs=[],f}();a.Logger=g}(teads||(teads={}));var teads;!function(a){var b=function(){function a(){}return a.isBase64=function(a){var b=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"),c=b.exec(a);return!!(c&&c.length>0)},a.encode=function(a){return window.btoa?btoa(a):a},a.decode=function(a){return window.atob?atob(a):a},a}();a.Base64=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.getBoundingClientRect=function(b){var c;try{c=b.getBoundingClientRect()}catch(d){return{left:0,top:0,right:0,bottom:0,width:0,height:0}}if(a.Context.isIE()&&b.ownerDocument.body){var e=b.ownerDocument;if(c.left-=e.documentElement.clientLeft+e.body.clientLeft,c.top-=e.documentElement.clientTop+e.body.clientTop,void 0===c.width&&b.offsetWidth)return{left:c.left,top:c.top,right:c.right,bottom:c.bottom,width:b.offsetWidth,height:b.offsetHeight}}return c},b.getSize=function(c){var d=c.offsetWidth,e=c.offsetHeight,f=a.Context.getUA().indexOf("WebKit")>-1&&!d&&!e;if((!d||f)&&c.getBoundingClientRect){var g=b.getBoundingClientRect(c);return{width:g.right-g.left,height:g.bottom-g.top}}return{width:d,height:e}},b.getTextContent=function(c,d){if(a.ArrayHelper.indexOf(b.TAGS_TO_IGNORE,c.nodeName)>=0);else if(c.nodeType===b.NODE_TYPES.TEXT)d.push(c.nodeValue);else if(c.nodeName in b.PREDEFINED_TAG_VALUES)d.push(b.PREDEFINED_TAG_VALUES[c.nodeName]);else for(var e=c.firstChild;e;)b.getTextContent(e,d),e=e.nextSibling},b.querySelectorAll=function(b,c){if(a.Context.isOldIE(8)){var d,e,f,g,h=b.split(","),i=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=b.split(/[ >]+/),r=b.match(/[ >]+/g)||[],s=[a];for(r.unshift(" ");d=q.shift();)for(e=r.shift(),e&&(e=e.replace(/^ +| +$/g,"")),f=s.slice(0),s=[],g=f.length,i=d.match(/[#.[]?[a-z_-]+(?:='[^']+'|="[^"]+")?]?/gi),j=i.length,h=0;g>h;h++)if("#"===i[0].charAt(0))s=[c.document.getElementById(i[0].substr(1))];else{if(l=">"===e?f[h].children:f[h].getElementsByTagName?f[h].getElementsByTagName("*"):f[h].document.getElementsByTagName("*"),!l)continue;for(n=l.length,m=0;n>m;m++){for(o=!0,k=0;j>k;k++){switch(i[k].charAt(0)){case".":l[m].className.match(new RegExp("\\b"+i[k].substr(1)+"\\b"))||(o=!1);break;case"[":p=i[k].substr(1,i[k].length-2).split("="),l[m].getAttribute(p[0])?p[1]&&(p[1]=p[1].replace(/^['"]|['"]$/g,""),l[m].getAttribute(p[0])!==p[1]&&(o=!1)):o=!1;break;default:l[m].tagName.toLowerCase()!==i[k].toLowerCase()&&(o=!1)}if(!o)break}o&&s.push(l[m])}}return s},j=h.length,k=[];for(d=0;j>d;d++)for(e=i(c,h[d].replace(/^\s*([\S\s]*?)\s*$/,"$1")),f=e.length,g=0;f>g;g++)k.push(e[g]);return k}return c.document.querySelectorAll(b)},b.isInternalLink=function(a,b){return"A"===a.tagName&&a.href?b.document.location.host!==a.host?!1:a.target&&!/^_(self|top)$/i.test(a.target)?!1:b.document.location.href.split("#")[0]===a.href.split("#")[0]?!1:!0:!1},b.getWindowSize=function(a){return void 0===a&&(a=window),"number"==typeof a.innerWidth?{width:a.innerWidth,height:a.innerHeight}:a.document.documentElement&&(a.document.documentElement.clientWidth||a.document.documentElement.clientHeight)?{width:a.document.documentElement.clientWidth,height:a.document.documentElement.clientHeight}:a.document.body&&(a.document.body.clientWidth||a.document.body.clientHeight)?{width:a.document.body.clientWidth,height:a.document.body.clientHeight}:{width:1e3,height:600}},b.inject=function(a,b){void 0===b&&(b=window);var c=b.document.getElementsByTagName("head")[0]||b.document.body;c.appendChild(a)},b.addEventListener=function(a,b,c){b.addEventListener?b.addEventListener(a,c,!0):b.attachEvent("on"+a,c)},b.removeEventListener=function(a,b,c){b.removeEventListener?b.removeEventListener(a,c,!0):b.detachEvent("on"+a,c)},b.onDomReady=function(a,c){void 0===c&&(c=window),!c.document||"complete"!==c.document.readyState&&"loaded"!==c.document.readyState&&"interactive"!==c.document.readyState?c.addEventListener?c.addEventListener("DOMContentLoaded",a,!1):c.attachEvent&&c===c.top?1===b.readyQueue.push(a)&&b.readyIEtop(c):c.attachEvent&&c.attachEvent("onload",a):"interactive"===c.document.readyState&&c.document.attachEvent?c.document.attachEvent("onreadystatechange",function(){("complete"===c.document.readyState||"loaded"===c.document.readyState)&&a()}):a()},b.onDomComplete=function(a,c,d){void 0===c&&(c=window),void 0===d&&(d=this),"complete"===c.document.readyState?a.call(d):b.addEventListener("load",c,function(){a.call(d)})},b.getScrollTop=function(a){return a.pageYOffset?a.pageYOffset:"CSS1Compat"===(a.document.compatMode||"")?a.document.documentElement.scrollTop:a.document.body.scrollTop},b.getElementsByClassName=function(a,b,c){if(void 0===c&&(c=window),b=b||c.document,b.getElementsByClassName)return b.getElementsByClassName(a);for(var d=a.split(" "),e="",f=0,g=d.length;g>f;f++)e+="."+d[f];return b.querySelectorAll(e)},b.isHTMLElement=function(a,b){return void 0===b&&(b=window),a&&"object"==typeof a?"object"==typeof b.HTMLElement?a instanceof b.HTMLElement:a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName:!1},b.isNodeList=function(a){return a&&"object"==typeof a?"[object NodeList]"===String(a)||"[object StaticNodeList]"===String(a):!1},b.isSelfClosingTag=function(a){return this.isHTMLElement(a)?/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i.test(a.nodeName):void 0},b.readyIEtop=function(a){try{var c=a.document.documentElement;c.doScroll("left");for(var d;d=b.readyQueue.shift();)d()}catch(e){setTimeout(b.readyIEtop,50,a)}},b.readyQueue=[],b.PREDEFINED_TAG_VALUES={IMG:" ",BR:"\n"},b.TAGS_TO_IGNORE=["SCRIPT","STYLE","HEAD","IFRAME","OBJECT"],b.NODE_TYPES={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},b}();a.Dom=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.createIframe=function(){var a=document.createElement("iframe");return a.style.margin="0px",a.style.padding="0px",a.style.width="0",a.style.height="0",a.style.border="0px",a.style.overflow="hidden",a.setAttribute("scrolling","no"),a.frameBorder="0",a},b.isFullscreen=function(a){return a||(a=document),!!(a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement)},b.getWindow=function(a){var c=b.getDocument(a);return c.defaultView||c.parentWindow},b.getDocument=function(a){return a.ownerDocument},b.toggleFullscreen=function(a){b.isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},b.addClass=function(c,d){b.hasClass(c,d)||(c.className+=" "+d,c.className=a.StringHelper.trim(c.className))},b.removeClass=function(c,d){if(b.hasClass(c,d)){var e=c.className.split(" ");e.splice(a.ArrayHelper.indexOf(e,d),1),c.className=a.StringHelper.trim(e.join(" "))}},b.hasClass=function(b,c){return-1!==a.ArrayHelper.indexOf(b.className.split(" "),c)},b.toggleClass=function(a,c){b.hasClass(a,c)?b.removeClass(a,c):b.addClass(a,c)},b.replaceClass=function(a,c,d){!b.hasClass(a,c)&&b.hasClass(a,d)&&(b.removeClass(a,d),b.addClass(a,c))},b.findParentWindows=function(a){var c,d=[];c=function(a){a.parent!==a&&(d.push(a.parent),c(a.parent))};var e=b.getWindow(a);return d.push(e),c(e),d},b.forceRepaint=function(a){var b=a.style.lineHeight;a.style.lineHeight="15px",setTimeout(function(){a.style.lineHeight=b},150)},b.findChildWindows=function(a){for(var b=[],c=a.getElementsByTagName("iframe"),d=0;d<c.length;d++)try{b.push(c[d].contentWindow)}catch(e){}return b},b.findParentFrameNode=function(a){var c=b.getWindow(a);if(c.parent!==c){var d;try{d=c.parent.document.getElementsByTagName("iframe")}catch(e){}if(d)for(var f=0;f<d.length;f++)if(d[f].contentWindow===c)return b.findParentFrameNode(d[f].parentNode)}return a},b.isInView=function(b,c,d,e){e||(e=b.offsetHeight);var f=a.Dom.getWindowSize(c),g=a.Dom.getBoundingClientRect(b),h=g.top+e*d,i=g.top+e*(1-d),j=h>0&&h<f.height,k=i>0&&i<f.height;return.5>d?j||k:j&&k},b}();a.HTMLHelper=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){}return b.decode=function(b){if("object"==typeof b&&b.AdParameters&&"string"==typeof b.AdParameters&&(b=b.AdParameters),b&&"string"==typeof b){a.Base64.isBase64(b)?b=a.Base64.decode(b):0===b.indexOf("%7B")&&(b=decodeURIComponent(b));try{b=JSON.parse(b)}catch(c){throw"Unable to JSON.parse adParameter string: "+b}}if(!b||"object"!=typeof b)throw"adParameter is not an object: "+b;return b},b}();a.AdParameterHelper=b}(teads||(teads={}));var teads;!function(a){var b=function(){function a(){}return a.track=function(a,b,c){void 0===c&&(c="");try{b+=b.indexOf("?")<0?"?":"&";var d=new Image;d.src=b+encodeURIComponent(c)+encodeURIComponent(this.stringifyData(a))}catch(e){}},a.stringifyData=function(a){var b=function(a){var b;try{b=JSON.stringify(a)}catch(c){a.toString&&(b=a.toString())}return b};if(a.length)for(var c in a)"function"==typeof a[c]?a[c]=a[c].toString():"object"==typeof a[c]&&(a[c]=b(a[c]));else a=b(a);return a.toString?a.toString():a},a}();a.LogSender=b}(teads||(teads={}));var teads;!function(a){var b=function(){function b(){this.logger=new a.Logger("Sumologic"),this.prefixPattern="[timestamp][sessionId][type] ",this.isEnabled=!1,this.logStorage=[],this.initTime=(new Date).getTime()}return b.prototype.init=function(b,c){var d=this;void 0===c&&(c=!1),this.collectorUrl=b,this.sessionId=a.StringHelper.rand(10,!1),this.canSend=c||Math.random()<=.1,
this.logger.debug("Sumologic init with sessionId="+this.sessionId),this.isEnabled=!!b,this.isEnabled||this.logger.warn("Missing collector URL. Maybe you forgot to use Sumologic.init(collectorUrl)?"),this.canSend&&this.isEnabled&&this.logStorage.length&&a.ArrayHelper.forEach(this.logStorage,function(a){return d[a[0]].apply(d,a[1])})},b.prototype.getCollectorUrl=function(){return this.collectorUrl},b.prototype.getSessionId=function(){return this.sessionId},b.prototype.sendMetadata=function(a,b){void 0===b&&(b=!1),this.send("metadata",a,b)},b.prototype.sendError=function(a,b){void 0===b&&(b=!1),this.send("error",a,b)},b.prototype.sendWarning=function(a,b){void 0===b&&(b=!1),this.send("warning",a,b)},b.prototype.sendInfo=function(a,b){void 0===b&&(b=!1),this.send("info",a,b)},b.prototype.send=function(b,c,d){if(void 0===d&&(d=!1),this.isEnabled){if(!d&&!this.canSend)return void this.logger.warn("Logs were not sent (sampling)");var e=this.prefixPattern.replace("timestamp",String((new Date).getTime()-this.initTime)).replace("sessionId",this.sessionId).replace("type",b);this.logger.debug("Send log to collector",e,c),a.LogSender.track(c,this.collectorUrl,e)}else this.logger.warn("Could not send logs, Sumologic service disaled"),this.logStorage.push(["send",arguments])},b.prototype.sendRaw=function(b,c){if(void 0===c&&(c=!1),this.isEnabled){if(!c&&!this.canSend)return this.logger.warn("Logs were not sent (sampling)"),void this.logStorage.push(["sendRaw",arguments]);a.LogSender.track(b,this.collectorUrl),this.logger.debug("Send raw log to collector",b)}},b.collectors={format:"https://collectors.sumologic.com/receiver/v1/http/ZaVnC4dhaV3tMuL-jxvu56KuKcSIi_eLBhYb_0eQctHPV_bMOS0uLhecK3UMUubdU5avpM_XomdffRBMzvUIfFfqLz5JwZn-JE0R0yoNOsSIDC5b49BqBA==",player:"https://collectors.sumologic.com/receiver/v1/http/ZaVnC4dhaV2OstA92K8Xbn3MlFYZW-oUBicuj44GtIKtbZsUPvY1aTO-DkS5EoVbf_mtsgRWO-otjA_fSTBl1yV_mEd-yGbaQfhOYvtJXPQiK_SjXO-ooQ==",router:"https://collectors.sumologic.com/receiver/v1/http/ZaVnC4dhaV0yoMPXbPr1DJTzvZ_VeQ7n1DApdY6sPcYLrf1gFjmKPORhsIs8hroR9pe88sjZXHTQxTrYqnZNTcnXzFVg5-i9Pz47hKdrrMZSaq75aHxutg=="},b}();a.Sumologic=b}(teads||(teads={}));var teads;!function(a){var b=function(){function a(){}return a.createXmlHttpRequest=function(){var a=null;if(window.XMLHttpRequest&&(a=new XMLHttpRequest),!a||"withCredentials"in a||(a=window.XDomainRequest?new window.XDomainRequest:null),!a){try{a=new ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(b){try{a=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){throw new Error("could not create XMLHttpRequest nor ActiveXObject")}}a.responseType="msxml-document"}return a},a}();a.Request=b}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.applyVendorProperties=function(b,c,d){b.style[c]=d,c=a.capitalize(c),b.style["Moz"+c]=d,b.style["webkit"+c]=d,b.style["O"+c]=d,b.style["ms"+c]=d},a.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},a.now=function(){return window.performance?window.performance.now():Date.now()},a.fillArray=function(a,b){for(var c=0,d=a.length;d>c;c++)a[c]=b},a.formatBenchTime=function(a){return 1>a?parseFloat(a.toString().substr(0,4)):Math.round(a)},a.blob=function(a,b){void 0===b&&(b="application/javascript");var c;if(window.Blob)c=new Blob([a],{type:b});else{window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;var d=new window.BlobBuilder;d.append(a),c=d.getBlob()}return c},a.url=function(){return window.URL||window.webkitURL},a}();a.Utils=b}(b=a.helper||(a.helper={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.SHADER_FRAGMENT_YCBCRTORGBA=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),a.SHADER_FRAGMENT_LOADING=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),a.SHADER_VERTEX_IDENTITY=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n"),a}();a.Shader=b}(b=a.model||(a.model={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){a.mediaEvents={ABORT:"abort",CAN_PLAY:"canplay",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",LOADED:"loaded",PAUSE:"pause",PLAY:"play",PROGRESS:"progress",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",RESUME_AFTER_STALLED:"resumeafterstalled",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",AUDIO_SYNC:"audiosync",BENCH_FPS:"benchFps",RESIZE:"resize"}}(b=a.model||(a.model={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(b){var c=function(){function b(){this.loggerED=new a.Logger("canvas.player.components.EventDispatcher"),this.cb={},this.addEventListener=this.listen,this.removeEventListener=this.muteEvent}return b.prototype.listen=function(a,b,c){void 0===c&&(c=!1),this.cb[a]||(this.cb[a]=new Array),this.cb[a].push(b)},b.prototype.muteEvent=function(a,b){this.cb[a]?b&&-1!==this.cb[a].indexOf(b)?this.cb[a].splice(this.cb[a].indexOf(b),1):b?this.loggerED.error("call muteEvent for",a,"but handler ",b," does not exist for this event"):this.cb[a]=new Array:this.loggerED.error("call muteEvent for",a,"but handlers for this event are empty")},b.prototype.dispatch=function(a,b){this.cb[a]&&(b?b.type=a:b={type:a},this.cb[a].forEach(function(a,c){a(b)}))},b}();b.EventDispatcher=c}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(b){function c(a,c,d){b.call(this),this.container=a,this.cWidth=c,this.cHeight=d,this.totalPrintingTime=0,this.totalPrintedFrame=0,this.canvas=document.createElement("canvas"),this.canvas.width=c,this.canvas.height=d,this.canvas.style.background="#000",this.canvasContext=this.canvas.getContext("2d"),a.appendChild(this.canvas),this.initWebGL()}return __extends(c,b),Object.defineProperty(c.prototype,"width",{get:function(){return this.cWidth},set:function(a){this.cWidth=a,this.resizeFromDecoder()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"height",{get:function(){return this.cHeight},set:function(a){this.cHeight=a,this.resizeFromDecoder()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"parentNode",{get:function(){return this.canvas.parentNode},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"style",{get:function(){return this.canvas.style},enumerable:!0,configurable:!0}),c.prototype.resizeFromDecoder=function(b,c){b&&(this.canvas.width=this.decoderWidth=b),c&&(this.canvas.height=this.decoderHeight=c);var d=this.cWidth/this.canvas.width;a.helper.Utils.applyVendorProperties(this.canvas,"transformOrigin","0 0"),a.helper.Utils.applyVendorProperties(this.canvas,"transform","scale("+d+")"),b&&c&&(this.gl?(this.gl.useProgram(this.program),this.gl.viewport(0,0,b,c)):(this.currentRGBA=this.canvasContext.getImageData(0,0,b,c),a.helper.Utils.fillArray(this.currentRGBA.data,255))),this.dispatch(a.model.mediaEvents.RESIZE,{width:this.width,height:this.height})},c.prototype.renderFrame=function(b){var c=a.helper.Utils.now();this.gl?this.renderFrameGL(b):this.renderFrame2D(b),this.totalPrintingTime+=a.helper.Utils.now()-c,this.totalPrintedFrame++},c.prototype.renderHtmlImageElement=function(b){var c=a.helper.Utils.now();this.canvasContext.drawImage(b,0,0),this.totalPrintingTime+=a.helper.Utils.now()-c,this.totalPrintedFrame++},c.prototype.averagePrintingTime=function(){return this.totalPrintingTime/this.totalPrintedFrame},c.prototype.initWebGL=function(){try{this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(b){return!1}if(!this.gl)return!1;var c=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),this.gl.STATIC_DRAW),this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.compileShader(this.gl.VERTEX_SHADER,a.model.Shader.SHADER_VERTEX_IDENTITY)),this.gl.attachShader(this.program,this.compileShader(this.gl.FRAGMENT_SHADER,a.model.Shader.SHADER_FRAGMENT_YCBCRTORGBA)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw new Error(this.gl.getProgramInfoLog(this.program));this.gl.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var d=this.gl.getAttribLocation(this.program,"vertex");return this.gl.enableVertexAttribArray(d),this.gl.vertexAttribPointer(d,2,this.gl.FLOAT,!1,0,0),this.loadingProgram=this.gl.createProgram(),this.gl.attachShader(this.loadingProgram,this.compileShader(this.gl.VERTEX_SHADER,a.model.Shader.SHADER_VERTEX_IDENTITY)),this.gl.attachShader(this.loadingProgram,this.compileShader(this.gl.FRAGMENT_SHADER,a.model.Shader.SHADER_FRAGMENT_LOADING)),this.gl.linkProgram(this.loadingProgram),this.gl.useProgram(this.loadingProgram),d=this.gl.getAttribLocation(this.loadingProgram,"vertex"),this.gl.enableVertexAttribArray(d),this.gl.vertexAttribPointer(d,2,this.gl.FLOAT,!1,0,0),!0},c.prototype.renderFrameGL=function(a){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.YTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,a.codedWidth,this.canvas.height,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,a.currentY),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.CBTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,a.halfWidth,this.canvas.height/2,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,a.currentCr),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.CRTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,a.halfWidth,this.canvas.height/2,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,a.currentCb),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)},c.prototype.compileShader=function(a,b){var c=this.gl.createShader(a);if(this.gl.shaderSource(c,b),this.gl.compileShader(c),!this.gl.getShaderParameter(c,this.gl.COMPILE_STATUS))throw new Error(this.gl.getShaderInfoLog(c));return c},c.prototype.createTexture=function(a,b){var c=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,c),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.uniform1i(this.gl.getUniformLocation(this.program,b),a),c},c.prototype.YCbCrToRGBA=function(a){for(var b,c,d,e,f,g=a.currentY,h=a.currentCb,i=a.currentCr,j=this.currentRGBA.data,k=0,l=a.codedWidth,m=a.codedWidth+(a.codedWidth-this.decoderWidth),n=0,o=a.halfWidth-(this.decoderWidth>>1),p=0,q=4*this.decoderWidth,r=4*this.decoderWidth,s=this.decoderWidth>>1,t=this.decoderHeight>>1,u=0;t>u;u++){for(var v=0;s>v;v++){b=h[n],c=i[n],n++,d=c+(103*c>>8)-179,e=(88*b>>8)-44+(183*c>>8)-91,f=b+(198*b>>8)-227;var w=g[k++],x=g[k++];j[p]=w+d,j[p+1]=w-e,j[p+2]=w+f,j[p+4]=x+d,j[p+5]=x-e,j[p+6]=x+f,p+=8;var y=g[l++],z=g[l++];j[q]=y+d,j[q+1]=y-e,j[q+2]=y+f,j[q+4]=z+d,j[q+5]=z-e,j[q+6]=z+f,q+=8}k+=m,l+=m,p+=r,q+=r,n+=o}},c.prototype.renderFrame2D=function(a){this.YCbCrToRGBA(a),this.canvasContext.putImageData(this.currentRGBA,0,0)},c}(b.EventDispatcher);b.Canvas=c}(b=a.components||(a.components={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){!function(a){a[a.FULL=0]="FULL",a[a.SMART=1]="SMART",a[a.NO_STREAM=2]="NO_STREAM"}(a.StreamType||(a.StreamType={}));a.StreamType}(b=a.model||(a.model={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){!function(a){a[a.INIT=0]="INIT",a[a.INIT_VIDEO=1]="INIT_VIDEO",a[a.INIT_AUDIO=2]="INIT_AUDIO",a[a.CAN_PLAY=3]="CAN_PLAY",a[a.PLAYING=4]="PLAYING",a[a.PAUSED=5]="PAUSED",a[a.LOADED=6]="LOADED",a[a.STALLED=7]="STALLED",a[a.ENDED=8]="ENDED"}(a.MediaState||(a.MediaState={}));a.MediaState}(b=a.model||(a.model={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(c){function d(d,e,f,g){c.call(this),this.meta=e,this.player=g,this.logger=new a.Logger("canvas.player.components.Video"),this.head=0,this.targetTime=0,this.decodeFinish=!1,this.benchFps=0,this.benchFpsRetained=0,this.benchFpsCount=0,this.fpsLimit=0,this.frameRate=24,this.frameStart=1,this.frameCachedLimit=24,this.videoFrames=[],this.frameWait=Math.floor(1e3/this.frameRate);var h=b.helper.Utils.blob('importScripts("'+this.player.assetsPath+'/teads-mpeg-decoder.min.js")');this.worker=new Worker(b.helper.Utils.url().createObjectURL(h)),this.worker.onmessage=this.onmessage.bind(this),this.worker.postMessage(["init",d,e]),this.state=b.model.MediaState.INIT}return __extends(d,c),d.prototype.canplay=function(){return this.state===b.model.MediaState.CAN_PLAY||this.state===b.model.MediaState.PLAYING||this.state===b.model.MediaState.PAUSED||this.state===b.model.MediaState.LOADED||this.state===b.model.MediaState.ENDED},d.prototype.play=function(){this.state!==b.model.MediaState.PLAYING&&(this.state=b.model.MediaState.PLAYING,this.loopPlay())},d.prototype.pause=function(){this.state!==b.model.MediaState.STALLED&&(this.state=b.model.MediaState.PAUSED)},d.prototype.getCurrentTime=function(){return this.state===b.model.MediaState.INIT?0:this.head/this.frameRate},d.prototype.setCurrentTime=function(a){var b=Math.ceil(a*this.frameRate);return this.videoFrames[b]?(this.cleanFrame(this.head,b),this.head=b,!0):!1},Object.defineProperty(d.prototype,"duration",{get:function(){return this.decodeFinish?this.videoFrames.length/this.frameRate:parseFloat(this.meta.infos.duration)},enumerable:!0,configurable:!0}),d.prototype.cleanStallTimeout=function(){clearTimeout(this.timeoutStalled),this.timeoutStalled=null,this.state=b.model.MediaState.PAUSED},d.prototype.onload=function(){this.dispatch(b.model.mediaEvents.LOADED),this.decodeFinish=!0},d.prototype.oninit=function(){this.benchFps=b.helper.Utils.now(),this.state=b.model.MediaState.INIT_VIDEO,this.renderFrame()},d.prototype.oncanplay=function(){this.state=b.model.MediaState.CAN_PLAY,this.dispatch(b.model.mediaEvents.CAN_PLAY)},d.prototype.onstalled=function(){var a=this;this.state=b.model.MediaState.STALLED,this.dispatch(b.model.mediaEvents.STALLED),this.listen(b.model.mediaEvents.LOADED,function(){return a.onresumestalled()})},d.prototype.onresumestalled=function(){this.state===b.model.MediaState.STALLED&&(this.cleanStallTimeout(),this.dispatch(b.model.mediaEvents.RESUME_AFTER_STALLED))},d.prototype.ondecodeframe=function(){this.state!==b.model.MediaState.ENDED&&this.dispatch(b.model.mediaEvents.TIME_UPDATE)},d.prototype.onfinish=function(){this.state=b.model.MediaState.ENDED,this.dispatch(b.model.mediaEvents.ENDED)},d.prototype.onmessage=function(a){var b=a.data[0];switch(b){case"frame":this.appendFrames(a.data),this.videoFrames.length===this.frameStart?this.oninit():this.videoFrames.length===this.frameCachedLimit&&this.oncanplay();break;case"initCanvas":this.player.resizeFromDecoder(a.data[1],a.data[2]);break;case"finish":this.averageDecodingTime=a.data[1],this.onload();break;default:this.logger.info(a.data)}},d.prototype.appendFrames=function(a){var c=this;if(this.videoFrames.push({codedWidth:a[1],halfWidth:a[2],currentY:new Uint8Array(a[3]),currentCr:new Uint8Array(a[4]),currentCb:new Uint8Array(a[5])}),this.averageDecodingTime=a[6],this.benchFpsCount++,this.benchFpsCount===this.frameCachedLimit){this.benchFpsRetained=b.helper.Utils.now()-this.benchFps;var d=Math.ceil(this.frameRate*this.benchFpsRetained/1e3);this.fpsLimit=Math.max(3,Math.min(this.frameCachedLimit,d+1))}this.state===b.model.MediaState.STALLED&&this.head+this.frameCachedLimit<=this.videoFrames.length&&(this.averageDecodingTime<=1e3/this.frameRate?this.timeoutStalled||(this.logger.warn("We are stalled and have",this.frameCachedLimit,"in memory, but stalled for download, so wait",2*this.benchFpsRetained,"ms"),this.timeoutStalled=setTimeout(function(){return c.onresumestalled()},2*this.benchFpsRetained),this.dispatch(b.model.mediaEvents.BENCH_FPS,2*this.benchFpsRetained)):this.onresumestalled())},d.prototype.loopPlay=function(){var a=this;this.head++;var c=this.targetTime?Math.max(-(this.frameWait/2),Math.min(0,this.targetTime-b.helper.Utils.now())):0,d=this.head>=this.videoFrames.length-1;d?(this.decodeFinish?this.onfinish():this.onstalled(),this.targetTime=0):this.state===b.model.MediaState.PLAYING&&(this.targetTime=b.helper.Utils.now()+this.frameWait,window.setTimeout(function(){return a.loopPlay()},this.frameWait+c)),this.renderFrame(),this.head%this.frameRate===0&&this.ondecodeframe()},d.prototype.renderFrame=function(){this.videoFrames[this.head]&&(this.player.renderFrame(this.videoFrames[this.head]),this.videoFrames[this.head]=null,this.videoFrames.length<this.head+this.fpsLimit&&(this.benchFps=b.helper.Utils.now(),this.benchFpsCount=0,this.worker.postMessage(["resume"])))},d.prototype.cleanFrame=function(a,b){for(var c=a;b>c;c++)this.videoFrames[c]=null},d}(c.EventDispatcher);c.MpegVideo=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(c){function d(a,b,d,e){c.call(this),this.meta=b,this.player=e,this.videoFrames=[],this.headBuffer=0,this.head=0,this.benchFps=0,this.frameWait=1e3/24,this.frameRate=24,this.frameCachedLimit=24,this.reading=!1,this.decodingTime=0,this.extractTime=0,this.extractCount=0,this.load(a+"/"+b.tv)}return __extends(d,c),d.prototype.canplay=function(){return this.head+this.frameCachedLimit<=this.videoFrames.length},d.prototype.play=function(){this.state!==b.model.MediaState.PLAYING&&(this.state=b.model.MediaState.PLAYING,this.loopPlay())},d.prototype.pause=function(){this.state!==b.model.MediaState.STALLED&&(this.state=b.model.MediaState.PAUSED)},d.prototype.getCurrentTime=function(){return this.state===b.model.MediaState.INIT?0:this.head/this.frameRate},d.prototype.setCurrentTime=function(a){var b=Math.ceil(a*this.frameRate);return this.videoFrames[b]?(this.head=b,!0):!1},Object.defineProperty(d.prototype,"duration",{get:function(){return parseFloat(this.meta.infos.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"averageDecodingTime",{get:function(){return this.decodingTime/this.videoFrames.length},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"averageExtractTime",{get:function(){return this.extractTime/this.extractCount},enumerable:!0,configurable:!0}),d.prototype.cleanStallTimeout=function(){},d.prototype.load=function(b){this.xhr=a.Request.createXmlHttpRequest(),this.xhr.open("GET",b,!0),this.xhr.responseType="text",this.xhr.onreadystatechange=this.onStateChange.bind(this),this.xhr.onload=this.onload.bind(this),this.xhr.send()},d.prototype.onStateChange=function(){this.xhr.responseText&&this.xhr.readyState>=3&&!this.reading&&(this.reading=!0,this.readResponseRecursive())},d.prototype.readResponseRecursive=function(){var a=this;if(this.reading){var c=b.helper.Utils.now(),d=this.xhr.responseText.substr(this.headBuffer,4*this.meta.infos.averageFrameSize),e=new RegExp("frame\\[("+this.videoFrames.length+")\\](.*)frame\\["+(this.videoFrames.length+1)+"\\]"),f=e.exec(d);if(this.extractTime+=b.helper.Utils.now()-c,this.extractCount++,f)this.headBuffer+=7+this.videoFrames.length.toString().length+f[2].length,this.extractFrame(f);else if(this.loaded){var g=new RegExp("frame\\[("+this.videoFrames.length+")\\](.*)"),h=g.exec(d);h&&(this.headBuffer+=7+this.videoFrames.length.toString().length+h[2].length,this.extractFrame(h))}this.headBuffer<this.xhr.responseText.length?window.setTimeout(function(){return a.readResponseRecursive()},this.state===b.model.MediaState.PLAYING?this.frameWait/2:1):this.reading=!1}},d.prototype.onload=function(){this.loaded=!0,this.dispatch(b.model.mediaEvents.LOADED)},d.prototype.oninit=function(){this.benchFps=b.helper.Utils.now(),this.state=b.model.MediaState.INIT_VIDEO,this.player.resizeFromDecoder(this.meta.infos.width,9*this.meta.infos.width/16),this.player.renderHtmlImageElement(this.videoFrames[0])},d.prototype.oncanplay=function(){this.state===b.model.MediaState.INIT_VIDEO&&(this.state=b.model.MediaState.CAN_PLAY,this.dispatch(b.model.mediaEvents.CAN_PLAY))},d.prototype.onstalled=function(){var a=this;this.state=b.model.MediaState.STALLED,this.dispatch(b.model.mediaEvents.STALLED),this.listen(b.model.mediaEvents.LOADED,function(){return a.onresumestalled()})},d.prototype.onresumestalled=function(){this.state===b.model.MediaState.STALLED&&this.dispatch(b.model.mediaEvents.RESUME_AFTER_STALLED)},d.prototype.ondecodeframe=function(){this.state!==b.model.MediaState.ENDED&&this.dispatch(b.model.mediaEvents.TIME_UPDATE)},d.prototype.onfinish=function(){this.state=b.model.MediaState.ENDED,this.dispatch(b.model.mediaEvents.ENDED)},d.prototype.extractFrame=function(a){var c=this,d=b.helper.Utils.now(),e=this.videoFrames[a[1]]=new Image;e.src="data:image/jpeg;base64,"+a[2],e.width=this.meta.infos.width,e.height=9*this.meta.infos.width/16,e.onload=function(){return c.decodingTime+=b.helper.Utils.now()-d},1===this.videoFrames.length?this.oninit():this.videoFrames.length>=this.frameCachedLimit&&this.oncanplay(),this.head+this.frameCachedLimit<=this.videoFrames.length&&this.onresumestalled()},d.prototype.loopPlay=function(){var a=this;this.head++;var c=this.targetTime?Math.max(-(this.frameWait/2),this.targetTime-b.helper.Utils.now()):0,d=this.head>=this.videoFrames.length-1;d?(this.loaded&&!this.reading?this.onfinish():this.onstalled(),this.targetTime=0):this.state===b.model.MediaState.PLAYING&&(this.targetTime=b.helper.Utils.now()+this.frameWait+c,window.setTimeout(function(){return a.loopPlay()},this.frameWait+c)),this.player.renderHtmlImageElement(this.videoFrames[this.head]),this.head%this.frameRate===0&&this.ondecodeframe()},d}(c.EventDispatcher);c.JpegVideo=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(c){function d(d,e,f,g){var h=this;c.call(this),this.meta=e,this.player=g,this.meta.tv?this.api=new b.JpegVideo(d,e,f,g):this.api=new b.MpegVideo(d,e,f,g),this.api.listen(a.model.mediaEvents.CAN_PLAY,function(){return h.dispatch(a.model.mediaEvents.CAN_PLAY)}),this.api.listen(a.model.mediaEvents.LOADED,function(){return h.dispatch(a.model.mediaEvents.LOADED)}),this.api.listen(a.model.mediaEvents.STALLED,function(){return h.dispatch(a.model.mediaEvents.STALLED)}),this.api.listen(a.model.mediaEvents.RESUME_AFTER_STALLED,function(){return h.dispatch(a.model.mediaEvents.RESUME_AFTER_STALLED)}),this.api.listen(a.model.mediaEvents.TIME_UPDATE,function(){return h.dispatch(a.model.mediaEvents.TIME_UPDATE)}),this.api.listen(a.model.mediaEvents.ENDED,function(){return h.dispatch(a.model.mediaEvents.ENDED)}),this.api.listen(a.model.mediaEvents.BENCH_FPS,function(b){return h.dispatch(a.model.mediaEvents.BENCH_FPS,b)})}return __extends(d,c),d.prototype.canplay=function(){return this.api.canplay()},d.prototype.play=function(){this.api.play()},d.prototype.pause=function(){this.api.pause()},d.prototype.getCurrentTime=function(){return this.api.getCurrentTime()},d.prototype.setCurrentTime=function(a){return this.api.setCurrentTime(a)},Object.defineProperty(d.prototype,"duration",{get:function(){return this.api.duration},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"state",{get:function(){return this.api.state},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"videoFrames",{get:function(){return this.api.videoFrames},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"averageDecodingTime",{get:function(){return this.api.averageDecodingTime},enumerable:!0,configurable:!0}),d.prototype.cleanStallTimeout=function(){this.api.cleanStallTimeout()},d}(b.EventDispatcher);b.Video=c}(b=a.components||(a.components={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){}(b=a.model||(a.model={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(c){function d(b,d,e){c.call(this),this.baseUrl=b,this.chunkUrls=d,this.streamType=e,this.chunkLoaded=0,this.chunkLength=0,this.loggerF=new a.Logger("canvas.player.components.File"),this.chunkNumStart=1,this.chunkNumCanPlay=3,this.chunkLength=this.chunkUrls.length,this.streamLoad()}return __extends(d,c),d.prototype.canplay=function(){return this.state===b.model.MediaState.CAN_PLAY||this.state===b.model.MediaState.PLAYING||this.state===b.model.MediaState.PAUSED||this.state===b.model.MediaState.LOADED||this.state===b.model.MediaState.ENDED},d.prototype.streamLoad=function(){var c=this,d=window.location.protocol.match(/http|https/gi)?"":"http:",e=d+this.baseUrl+"/"+this.chunkUrls.shift(),f=a.Request.createXmlHttpRequest();f.open("GET",e,!0),f.responseType="arraybuffer",f.addEventListener("load",function(a){c.chunkLoaded++,c.chunkLoaded===c.chunkNumStart?c.dispatch(b.model.mediaEvents.LOADED_DATA,f.response):c.dispatch(b.model.mediaEvents.PROGRESS,f.response),(c.chunkLoaded===c.chunkNumCanPlay||c.chunkLength<c.chunkNumCanPlay)&&c.dispatch(b.model.mediaEvents.CAN_PLAY),c.chunkLoaded===c.chunkLength&&c.dispatch(b.model.mediaEvents.LOADED),c.chunkUrls.length&&c.streamLoad()}),f.addEventListener("error",this.loggerF.error.bind(this.loggerF)),f.send()},d}(c.EventDispatcher);c.File=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(d){function e(e,f,g){d.call(this),this.baseUrl=e,this.meta=f,this.stream=g,this.estimatedDuration=0,this.iosReady=!1,this.logger=new a.Logger("canvas.player.components.Audio"),this.file=new c.File(this.baseUrl,this.meta.audio,this.stream);var h=a.Utils.getAudioContext();this.context=new h,this.file.listen(b.model.mediaEvents.LOADED_DATA,this.oninit.bind(this)),this.file.listen(b.model.mediaEvents.PROGRESS,this.onloadprogress.bind(this)),this.file.listen(b.model.mediaEvents.LOADED,this.onload.bind(this)),this.file.listen(b.model.mediaEvents.CAN_PLAY,this.oncanplay.bind(this)),this.file.state=b.model.MediaState.INIT,this.aVolume=a.Context.getIosVersion()?0:1,this.iosReady=!a.Context.getIosVersion()}return __extends(e,d),e.prototype.authorizeAudio=function(a){var b=this;if(void 0===a&&(a=function(){}),!this.iosReady){var c=this.context.createBufferSource(),d=this.context.createScriptProcessor(256,1,1);d.onaudioprocess=function(){b.iosReady=!0,c.disconnect(),d.disconnect(),a()},c.start(0),c.connect(d),d.connect(this.context.destination)}},e.prototype.play=function(a){var c=this;if(void 0===a&&(a=0),this.file.state!==b.model.MediaState.PLAYING&&this.volume&&this.iosReady){if(!this.buffer)return void setTimeout(function(){return c.play(a+.05)},50);this.resetAudio(),this.noteOnAt&&!a?(this.source.start(0,this.noteOnAt/1e3),this.noteOnAt=Date.now()-this.noteOnAt):(this.noteOnAt=Date.now()-1e3*a,this.source.start(0,a)),this.file.state=b.model.MediaState.PLAYING}},e.prototype.pause=function(){this.file.state!==b.model.MediaState.PAUSED&&this.source&&(this.noteOnAt=Date.now()-this.noteOnAt,this.source.stop(0),this.file.state!==b.model.MediaState.STALLED&&(this.file.state=b.model.MediaState.PAUSED))},e.prototype.canplay=function(){return this.file.canplay()},e.prototype.playing=function(){return this.file.state===b.model.MediaState.PLAYING},Object.defineProperty(e.prototype,"duration",{get:function(){return this.estimatedDuration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){var a=this.file.state===b.model.MediaState.PLAYING?Date.now()-this.noteOnAt:this.noteOnAt;return a/1e3},set:function(a){this.file.state===b.model.MediaState.PLAYING&&(this.pause(),this.noteOnAt=1e3*a,this.play())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.aVolume},set:function(a){this.aVolume=a,this.gainNode&&(this.gainNode.gain.value=a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorized",{get:function(){return this.iosReady},enumerable:!0,configurable:!0}),e.prototype.oninit=function(a){var b=this;this.data=a,this.context.decodeAudioData(a,function(a){var c=Math.ceil(b.meta.infos.audio_size/b.meta.infos.chunk_size)*a.length;b.estimatedDuration=c/a.sampleRate,b.buffer=b.context.createBuffer(a.numberOfChannels,c,a.sampleRate),b.setToMainBuffer(a)},this.logger.error.bind(this.logger))},e.prototype.onloadprogress=function(a){a&&(this.appendFileToData(a),this.decodeData())},e.prototype.onload=function(){var a=this;this.source?this.estimatedDuration=this.source.buffer.duration:setTimeout(function(){return a.onload()},50)},e.prototype.appendFileToData=function(a){var b=new Uint8Array(this.data.byteLength+a.byteLength);b.set(new Uint8Array(this.data),0),b.set(new Uint8Array(a),this.data.byteLength),this.data=b.buffer.slice(0,b.buffer.byteLength)},e.prototype.decodeData=function(){var a=this;this.context.decodeAudioData(this.data,function(b){a.setToMainBuffer(b)},this.logger.error.bind(this.logger))},e.prototype.setToMainBuffer=function(a){for(var b=0;b<a.numberOfChannels;b++){var c=this.buffer.getChannelData(b);c.set(a.getChannelData(b),0)}},e.prototype.oncanplay=function(){this.file.state=b.model.MediaState.CAN_PLAY,this.dispatch(b.model.mediaEvents.CAN_PLAY)},e.prototype.resetAudio=function(){if(this.source)try{this.source.stop(0)}catch(a){}this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.gainNode),this.gainNode.connect(this.context.destination),this.volume=this.aVolume},e}(c.EventDispatcher);c.WebAudioApi=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(b){function c(c,d){var e=this;b.call(this),this.baseUrl=c,this.meta=d,this.fakeVolume=0,this.touchOk=!1,this.node=document.createElement("audio"),this.node.src=this.baseUrl+"/"+this.meta.audio[0].replace(/\.mp3\.\w\w\w/gi,".mp3"),
this.node.preload="auto",this.node.addEventListener("canplay",function(){return e.dispatch(a.model.mediaEvents.CAN_PLAY)})}return __extends(c,b),c.prototype.authorizeAudio=function(a){void 0===a&&(a=function(){}),(!this.touchOk||this.node.readyState<=2)&&(this.touchOk=!0,this.node.play(),this.node.pause(),a())},c.prototype.play=function(b){var c=this;0!==this.fakeVolume&&this.state!==a.model.MediaState.PLAYING&&(this.node.readyState<=2?setTimeout(function(){return c.play(b+.1)},100):(b&&(this.currentTime=b),this.node.play(),this.state=a.model.MediaState.PLAYING))},c.prototype.pause=function(){this.node.pause(),this.state=a.model.MediaState.PAUSED},Object.defineProperty(c.prototype,"duration",{get:function(){return this.node.duration},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"currentTime",{get:function(){return this.node.currentTime},set:function(a){this.node.currentTime=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"volume",{get:function(){return this.fakeVolume},set:function(a){0===a&&this.pause(),this.fakeVolume=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"authorized",{get:function(){return this.touchOk&&this.node.readyState>=3},enumerable:!0,configurable:!0}),c.prototype.canplay=function(){return this.node.readyState>=1},c.prototype.playing=function(){return this.state===a.model.MediaState.PLAYING},c}(b.EventDispatcher);b.HtmlAudioElement=c}(b=a.components||(a.components={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(c){function d(a,b,d){c.call(this),this.baseUrl=a,this.meta=b,this.stream=d,b.audio.length&&this.init()}return __extends(d,c),d.prototype.authorizeAudio=function(a){this.api?this.api.authorizeAudio(a):a()},d.prototype.play=function(a){void 0===a&&(a=0),this.api&&this.api.play(a)},d.prototype.pause=function(){this.api&&this.api.pause()},Object.defineProperty(d.prototype,"duration",{get:function(){return this.api?this.api.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentTime",{get:function(){return this.api?this.api.currentTime:0},set:function(a){this.api&&(this.api.currentTime=a)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"volume",{get:function(){return this.api?this.api.volume:0},set:function(a){this.api&&(this.api.volume=a)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"authorized",{get:function(){return this.api?this.api.authorized:!0},enumerable:!0,configurable:!0}),d.prototype.canplay=function(){return this.api?this.api.canplay():!0},d.prototype.playing=function(){return this.api?this.api.playing():!1},d.prototype.init=function(){var c=this;this.api=new b.HtmlAudioElement(this.baseUrl,this.meta),this.api.listen(a.model.mediaEvents.CAN_PLAY,function(){return c.dispatch(a.model.mediaEvents.CAN_PLAY)})},d}(b.EventDispatcher);b.Audio=c}(b=a.components||(a.components={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(){function c(b){this.player=b,this.audiosync=[],this.stalledCount=0,this.sended=!1,this.canvasSumologic=new a.Sumologic,this.logger=new a.Logger("canvas.player.components.Bench"),this.bindEvent(),this.canvasSumologic.init(a.Sumologic.collectors.player,!0)}return c.prototype.bindEvent=function(){var a=this;this.player.listen(b.model.mediaEvents.PLAY,function(){return a.benchPlay()}),this.player.listen(b.model.mediaEvents.PAUSE,function(){return a.benchPause()}),this.player.listen(b.model.mediaEvents.AUDIO_SYNC,function(b){return a.audiosync.push(b.value)}),this.player.listen(b.model.mediaEvents.STALLED,function(){return a.stalledCount++}),this.player.listen(b.model.mediaEvents.TIME_UPDATE,function(){return a.benchEnd()})},c.prototype.benchPlay=function(){this.pausedAt?(this.logger.info("total pause",Date.now()-this.pausedAt),this.startTime+=Date.now()-this.pausedAt,this.pausedAt=null):this.startTime=Date.now()},c.prototype.benchPause=function(){this.pausedAt=Date.now()},c.prototype.benchEnd=function(){var a=this.player.duration-this.player.currentTime;if(!this.sended&&a&&1.2>=a){this.sended=!0;var c,d,e,f,g;try{c=(Date.now()-this.startTime)/1e3+a}catch(h){}try{d=parseFloat((this.player.video.api.videoFrames.length/c).toFixed(1))}catch(h){}try{e=b.helper.Utils.formatBenchTime(this.player.video.api.averageDecodingTime)}catch(h){}try{f=b.helper.Utils.formatBenchTime(this.player.video.api.averageExtractTime)}catch(h){}try{g=b.helper.Utils.formatBenchTime(this.player.averagePrintingTime())}catch(h){}this.canvasSumologic.sendInfo("canvas "+[d,e,f,g,this.stalledCount,this.audiosync.length].join(";")),this.logger.info("canvas "+[d,e,f,g,this.stalledCount,this.audiosync.length].join(";"))}},c}();c.Bench=d}(c=b.components||(b.components={}))}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c=function(){function b(b){var c=this;this.player=b,this.initBufferDiv(),this.player.video.listen(a.model.mediaEvents.STALLED,function(){return c.show()}),this.player.video.listen(a.model.mediaEvents.RESUME_AFTER_STALLED,function(){return c.hide()}),this.player.video.listen(a.model.mediaEvents.TIME_UPDATE,function(){return c.hide()}),this.player.listen(a.model.mediaEvents.RESIZE,function(a){return c.resize(a)})}return b.prototype.show=function(){this.player.container.insertBefore(this.container,this.player.canvas),this.setWait()},b.prototype.hide=function(){this.container.parentNode&&this.player.container.removeChild(this.container)},b.prototype.setWait=function(a){var b=this,c=100;this.bufferDiv.style.width="100%",a&&(this.bufferDiv.style.transition="width "+(a-c)+"ms linear",this.bufferDiv.style.webkitTransition=this.bufferDiv.style.transition,setTimeout(function(){return b.bufferDiv.style.width="0.1%"},c))},b.prototype.resize=function(a){this.container.style.width=a.width+"px",this.container.style.height=a.height+"px"},b.prototype.initBufferDiv=function(){var a=document.createElement("div");this.template='<div style="background: rgba(0, 0, 0, 0.7); position: absolute; z-index: 1000; color: white; font-family: Arial; font-size: 12px" ><div style="width:70px; margin: auto; margin-top: 25%;">BUFFERING <div class="buffer_div" style="margin: auto; background: white; height: 2px; width: 100%;"></div></div></div>\n',a.innerHTML=this.template,this.container=a.firstChild,this.bufferDiv=this.container.getElementsByClassName("buffer_div")[0]},b}();b.Buffering=c}(b=a.components||(a.components={}))}(b=a.player||(a.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c;!function(b){var c=function(c){function d(d,e,f,g,h){void 0===h&&(h=!0),c.call(this,d,e,f),this.assetsPath=g,this.logger=new a.Logger("canvas.player.CanvasPlayer"),this.audioSyncDiff=.5,this.logger.info("constructor()",d,e,f,g),this.assetsPath&&this.assetsPath.match(/http:|https:/)||(this.logger.warn("assetsPath replace with default (relative path not allow)"),this.assetsPath=window.location.protocol+"//cdn.teads.tv/media/player"),h&&(this.bench=new b.components.Bench(this))}return __extends(d,c),d.prototype.load=function(a,c,d){var e=this;void 0===c&&(c=!1),void 0===d&&(d=b.model.StreamType.NO_STREAM),this.logger.info("load()",a,c,d),this.url=a.replace(/http:|https:/,""),this.getMeta(this.url,function(a){var f=e.url.split("/");f.pop(),e.video=new b.components.Video(f.join("/"),a,d,e),e.audio=new b.components.Audio(f.join("/"),a,d),e.buffer=new b.components.Buffering(e),c&&e.listen(b.model.mediaEvents.CAN_PLAY,function(){return e.play()}),e.buffer.show(),e.listen(b.model.mediaEvents.CAN_PLAY,function(){return e.buffer.hide()}),e.video.listen(b.model.mediaEvents.STALLED,function(){return e.pause(!0)}),e.video.listen(b.model.mediaEvents.STALLED,function(){return e.dispatch(b.model.mediaEvents.STALLED)}),e.video.listen(b.model.mediaEvents.RESUME_AFTER_STALLED,function(){return e.dispatch(b.model.mediaEvents.RESUME_AFTER_STALLED)}),e.video.listen(b.model.mediaEvents.RESUME_AFTER_STALLED,function(){return e.play()}),e.video.listen(b.model.mediaEvents.TIME_UPDATE,function(){return e.onVideoProgress()}),e.video.listen(b.model.mediaEvents.CAN_PLAY,function(){return e.canPlayAll()}),e.audio.listen(b.model.mediaEvents.CAN_PLAY,function(){return e.canPlayAll()}),e.video.listen(b.model.mediaEvents.ENDED,function(){return e.dispatch(b.model.mediaEvents.ENDED)}),e.video.listen(b.model.mediaEvents.LOADED,function(){return e.dispatch(b.model.mediaEvents.LOADED)}),e.video.listen(b.model.mediaEvents.BENCH_FPS,function(a){return e.buffer.setWait(a)}),e.video.listen(b.model.mediaEvents.ERROR,function(){return e.dispatch(b.model.mediaEvents.ERROR)}),e.dispatch(b.model.mediaEvents.DURATION_CHANGE)})},d.prototype.play=function(){var a=this;this.logger.info("play()"),this.canplay()?(this.video.play(),this.audio.play(),this.dispatch(b.model.mediaEvents.PLAY)):this.listen(b.model.mediaEvents.CAN_PLAY,function(){return a.play()})},d.prototype.pause=function(a){void 0===a&&(a=!1),this.video&&this.audio?(this.video.pause(),this.audio.pause(),this.dispatch(b.model.mediaEvents.PAUSE),this.logger.info("pause()"),a||this.video.state!==b.model.MediaState.STALLED||(this.video.cleanStallTimeout(),this.buffer.hide())):this.muteEvent(b.model.mediaEvents.CAN_PLAY)},d.prototype.canplay=function(){return this.video&&this.audio?this.video.canplay()&&this.audio.canplay():!1},Object.defineProperty(d.prototype,"src",{get:function(){return this.url},set:function(a){this.load(a,!1,b.model.StreamType.FULL)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentTime",{get:function(){return this.video?this.video.getCurrentTime():0},set:function(a){this.video&&(this.logger.info("set currentTime",a),this.dispatch(b.model.mediaEvents.SEEKING),this.video.setCurrentTime(a)&&(this.audio.currentTime=a),this.dispatch(b.model.mediaEvents.SEEKED))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"duration",{get:function(){return this.video&&this.audio?this.video.duration||this.audio.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"volume",{get:function(){return this.audio?this.audio.volume:0},set:function(a){var c=this;if(this.logger.info("set volume",a),this.audio){this.audio.volume=a;var d=function(){return c.audio.play(c.currentTime)};this.canplay()&&this.video.state===b.model.MediaState.PLAYING&&d(),this.dispatch(b.model.mediaEvents.VOLUME_CHANGE,{value:a})}},enumerable:!0,configurable:!0}),d.prototype.onVideoProgress=function(){if(this.audio.api&&this.audio.playing()){var a=this.audio.currentTime-this.currentTime,c=Math.abs(a);c>=this.audioSyncDiff&&(a>0||this.video.meta.tv?this.video.setCurrentTime(this.audio.currentTime)||this.video.setCurrentTime(this.currentTime+this.audioSyncDiff):this.audio.currentTime=this.currentTime,this.logger.info("sync audio (diff/audioTime)",c,this.audio.currentTime),this.dispatch(b.model.mediaEvents.AUDIO_SYNC,{value:c}))}this.dispatch(b.model.mediaEvents.TIME_UPDATE)},d.prototype.canPlayAll=function(){this.canplay()&&this.dispatch(b.model.mediaEvents.CAN_PLAY)},d.prototype.getMeta=function(c,d){var e=this,f=a.Request.createXmlHttpRequest();f.open("GET",c.replace(/(\.mpg|\.mpeg|\.tv)(?!\/)/gi,".meta?v2"),!0),f.responseType="json",f.addEventListener("load",function(c){if(f.response){var g="string"==typeof f.response?JSON.parse(f.response):f.response;!g.tv&&(a.Context.isChromeIos()||a.Context.isUIWebview()||a.Context.isFacebookWebview()||a.Context.isIpad())?e.dispatch(b.model.mediaEvents.ERROR):d(g)}else e.dispatch(b.model.mediaEvents.ERROR)}),f.addEventListener("error",function(a){e.dispatch(b.model.mediaEvents.ERROR),e.logger.error.bind(e.logger)}),f.send()},d}(b.components.Canvas);b.CanvasPlayer=c}(c=b.player||(b.player={}))}(b=a.canvas||(a.canvas={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){!function(a){a[a.REMOVED=-6]="REMOVED",a[a.REMOVING=-5]="REMOVING",a[a.ERROR=-4]="ERROR",a[a.STOPPED=-3]="STOPPED",a[a.STOPPING=-2]="STOPPING",a[a.SKIPPED=-1]="SKIPPED",a[a.SKIPPING=0]="SKIPPING",a[a.READY=1]="READY",a[a.LOADING=2]="LOADING",a[a.LOADED=3]="LOADED",a[a.STARTING=5]="STARTING",a[a.STARTED=6]="STARTED",a[a.PAUSED=7]="PAUSED",a[a.PLAYING=8]="PLAYING",a[a.COMPLETE=9]="COMPLETE"}(a.VpaidStatus||(a.VpaidStatus={}));a.VpaidStatus}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b=function(){function a(a,b){void 0===b&&(b=null),this.type=a,this.data=b}return a.AdLoaded="AdLoaded",a.AdStarted="AdStarted",a.AdStopped="AdStopped",a.AdSkipped="AdSkipped",a.AdLinearChange="AdLinearChange",a.AdSizeChange="AdSizeChange",a.AdExpandedChange="AdExpandedChange",a.AdSkippableStateChange="AdSkippableStateChange",a.AdRemainingTimeChange="AdRemainingTimeChange",a.AdDurationChange="AdDurationChange",a.AdVolumeChange="AdVolumeChange",a.AdImpression="AdImpression",a.AdVideoStart="AdVideoStart",a.AdVideoFirstQuartile="AdVideoFirstQuartile",a.AdVideoMidpoint="AdVideoMidpoint",a.AdVideoThirdQuartile="AdVideoThirdQuartile",a.AdVideoComplete="AdVideoComplete",a.AdClickThru="AdClickThru",a.AdInteraction="AdInteraction",a.AdUserAcceptInvitation="AdUserAcceptInvitation",a.AdUserMinimize="AdUserMinimize",a.AdUserClose="AdUserClose",a.AdPaused="AdPaused",a.AdPlaying="AdPlaying",a.AdLog="AdLog",a.AdError="AdError",a}();a.VPAIDEvent=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function c(){this.listeners={},this.listenersScope={}}return c.prototype.subscribe=function(a,b,c){this.listeners[b]=this.listeners[b]||[],this.listeners[b].push(a),this.listenersScope[b]=this.listenersScope[b]||[],this.listenersScope[b].push(c?c:null)},c.prototype.unsubscribe=function(b,c){var d=this.listeners[c],e=a.ArrayHelper.indexOf(d,b);d&&e>=0&&(d[e]=function(){})},c.prototype.clearListeners=function(){this.listeners={},this.listenersScope={}},c.prototype.handleEvent=function(a,c){for(var d=this.listeners[a.type]||[],e=0,f=d.length;f>e;e++)try{var g=[];if(a.data)switch(a.type){case b.VPAIDEvent.AdClickThru:g=[a.data.url,a.data.id,a.data.playerHandles];break;case b.VPAIDEvent.AdLog:case b.VPAIDEvent.AdError:g=[a.data];break;case b.VPAIDEvent.AdInteraction:g=[a.data.id]}d[e].apply(this.listenersScope[a.type][e],g)}catch(h){if(c)throw"failed to log error on callback: "+a.data;this.handleEvent({type:b.VPAIDEvent.AdLog,data:"Callback #"+e+" on event "+a.type+" throws an exception: "+h},!0)}},c}();b.EventHandler=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){var c=function(){function b(){this.status=a.vpaid.VpaidStatus.READY,this.eventHandler=new a.vpaid.EventHandler,this.trackingRaised={AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1},this.parameters={},this.skippable=!1,this.expanded=!1}return b.prototype.getVPAID=function(){return this},b.prototype.handshakeVersion=function(a){return"2.0"},b.prototype.subscribe=function(a,b,c){this.eventHandler.subscribe(a,b,c)},b.prototype.unsubscribe=function(a,b){this.eventHandler.unsubscribe(a,b)},b.prototype.initAd=function(b,c,d,e,f,g){this.status=a.vpaid.VpaidStatus.LOADING,this.width=b,this.height=c,this.viewMode=d;try{f=a.AdParameterHelper.decode(f)}catch(h){return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,"invalid creative data : "+f)}for(var i in f)this.parameters[i]=f[i];return this.environmentVars=g,this.environmentVars.videoSlot||(this.environmentVars.videoSlot=document.createElement("video")),this.environmentVars.slot?(this.video=this.environmentVars.videoSlot,void(this.container=this.environmentVars.slot)):void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,"no slot provided in environmentVars")},b.prototype.startAd=function(){this.status=a.vpaid.VpaidStatus.STARTING},b.prototype.skipAd=function(){this.status=a.vpaid.VpaidStatus.SKIPPING},b.prototype.stopAd=function(){this.status=a.vpaid.VpaidStatus.STOPPING},b.prototype.resizeAd=function(a,b,c){this.width=a,this.height=b,this.viewMode=c},b.prototype.expandAd=function(){return!1},b.prototype.collapseAd=function(){return!1},b.prototype.getAdLinear=function(){return!0},b.prototype.getAdWidth=function(){return this.width},b.prototype.getAdHeight=function(){return this.height},b.prototype.getAdExpanded=function(){return a.HTMLHelper.isFullscreen()||this.expanded},b.prototype.getAdSkippableState=function(){return this.skippable},b.prototype.getAdCompanions=function(){return""},b.prototype.getAdIcons=function(){return!1},b.prototype.getAdDuration=function(){throw"not implemented"},b.prototype.getAdRemainingTime=function(){throw"not implemented"},b.prototype.getStatus=function(){return this.status},b.prototype.onAdVideoCompleteDispatched=function(){this.stopAd()},b.prototype.dispatchVpaidEvent=function(b,c){this.handleVPAIDEvent(new a.vpaid.VPAIDEvent(b,c))},b.prototype.handleVPAIDEvent=function(b){if(!(this.status===a.vpaid.VpaidStatus.SKIPPING&&b.type!==a.vpaid.VPAIDEvent.AdSkipped||this.status===a.vpaid.VpaidStatus.STOPPING&&b.type!==a.vpaid.VPAIDEvent.AdStopped||this.status<=a.vpaid.VpaidStatus.STOPPED||this.status===a.vpaid.VpaidStatus.STOPPING&&b.type!==a.vpaid.VPAIDEvent.AdStopped)){switch(b.type){case a.vpaid.VPAIDEvent.AdLoaded:this.status=a.vpaid.VpaidStatus.LOADED;break;case a.vpaid.VPAIDEvent.AdStarted:this.status=a.vpaid.VpaidStatus.STARTED;break;case a.vpaid.VPAIDEvent.AdVideoStart:case a.vpaid.VPAIDEvent.AdPlaying:this.status=a.vpaid.VpaidStatus.PLAYING;break;case a.vpaid.VPAIDEvent.AdPaused:this.status=a.vpaid.VpaidStatus.PAUSED;break;case a.vpaid.VPAIDEvent.AdVideoComplete:this.status=a.vpaid.VpaidStatus.COMPLETE;break;case a.vpaid.VPAIDEvent.AdSkipped:this.status=a.vpaid.VpaidStatus.SKIPPED;break;case a.vpaid.VPAIDEvent.AdStopped:this.status=a.vpaid.VpaidStatus.STOPPED;break;case a.vpaid.VPAIDEvent.AdDurationChange:case a.vpaid.VPAIDEvent.AdRemainingTimeChange:var c=this.getAdDuration(),d=c-this.getAdRemainingTime();c>0&&d>=.25*c&&!this.trackingRaised.AdVideoFirstQuartile?this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdVideoFirstQuartile):c>0&&d>=.5*c&&!this.trackingRaised.AdVideoMidpoint?this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdVideoMidpoint):c>0&&d>=.75*c&&!this.trackingRaised.AdVideoThirdQuartile&&this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdVideoThirdQuartile);break;case a.vpaid.VPAIDEvent.AdVideoFirstQuartile:case a.vpaid.VPAIDEvent.AdVideoMidpoint:case a.vpaid.VPAIDEvent.AdVideoThirdQuartile:if(this.trackingRaised[b.type])return;this.trackingRaised[b.type]=!0}this.eventHandler.handleEvent(b),this.status===a.vpaid.VpaidStatus.SKIPPED&&this.stopAd(),b.type===a.vpaid.VPAIDEvent.AdVideoComplete&&this.onAdVideoCompleteDispatched()}},b.prototype.handleException=function(b,c){var d='method "'+c+'" threw an exception: '+b.toString();this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,d),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,d)},b}();b.BaseVPAIDCreative=c}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b,c){this.id=c,this.layer=document.createElement("div"),this.layer.className+="vpaid-clickthrough",this.layer.style.cursor="pointer",this.layer.style.opacity="0",this.layer.style.backgroundColor="#FFFFFF",this.layer.style.position="absolute",this.layer.style.zIndex="65000",this.layer.addEventListener("click",function(d){a(b,c,!0)},!1)}return a.prototype.resize=function(a,b){this.layer.style.width=a+"px",this.layer.style.height=b+"px"},a.prototype.remove=function(){this.layer.parentNode&&this.layer.parentNode.removeChild(this.layer)},a.prototype.append=function(a){a.firstChild?a.insertBefore(this.layer,a.firstChild):a.appendChild(this.layer)},a}();a.ClickThrough=b}(b=a.component||(a.component={}))}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){window.getVPAIDAd=function(){return new c};var c=function(c){function d(){c.apply(this,arguments),this.config={url:"",debug:!0,skippable:!1,skipoffset:0},this.eventMap={durationchange:"AdDurationChange",resize:"AdSizeChange",volumechange:"AdVolumeChange",ended:"AdVideoComplete",play:"AdPlaying",playing:"AdPlaying",pause:"AdPaused",timeupdate:"AdRemainingTimeChange",error:"AdError"}}return __extends(d,c),d.prototype.initAd=function(b,d,e,f,g,h){if(this.status!==a.vpaid.VpaidStatus.READY)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"creative is not in ready state, cannot call initAd");try{c.prototype.initAd.call(this,b,d,e,f,g,h),this.video.src=this.parameters.url,this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLoaded)}catch(i){this.handleException(i,"initAd")}},d.prototype.startAd=function(){var d=this;if(this.status>a.vpaid.VpaidStatus.LOADED)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"try to call startAd but ad is starting or is already started");if(this.status<a.vpaid.VpaidStatus.LOADED)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Ad is not loaded, use initAd first");try{c.prototype.startAd.call(this),this.initListeners(),this.clickThrough=new b.component.ClickThrough(function(b,c,e){d.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdClickThru,{url:b,id:c,playerHandles:e})},this.parameters.clickThrough),this.clickThrough.append(this.container),this.clickThrough.resize(this.width,this.height),this.setSize(this.width,this.height),this.appendVideo(),this.video.play(),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdStarted),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdImpression)}catch(e){this.handleException(e,"startAd")}},d.prototype.skipAd=function(){if(this.status<=a.vpaid.VpaidStatus.SKIPPING)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Ad is already stopped or is skipping");try{this.skippable?(c.prototype.skipAd.call(this),this.video.pause(),this.video.style.display="none",this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdSkipped)):this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"skipAd() called, but creative is not skippable")}catch(b){this.handleException(b,"skipAd")}},d.prototype.resizeAd=function(b,c,d){try{this.setSize(b,c),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdSizeChange)}catch(e){this.handleException(e,"resizeAd")}},d.prototype.stopAd=function(){if(this.status<=a.vpaid.VpaidStatus.STOPPING)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Ad is already stopped");try{c.prototype.stopAd.call(this),this.removeVideo(),this.clickThrough.remove(),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdStopped),this.eventHandler.clearListeners()}catch(b){this.handleException(b,"stopAd")}},d.prototype.pauseAd=function(){try{this.video.pause()}catch(a){this.handleException(a,"pauseAd")}},d.prototype.resumeAd=function(){try{this.video.play()}catch(a){this.handleException(a,"resumeAd")}},d.prototype.getAdRemainingTime=function(){return this.video?this.video.duration-this.video.currentTime:0},d.prototype.getAdDuration=function(){return this.video?this.video.duration:0},d.prototype.getAdVolume=function(){return this.video?this.video.volume:0},d.prototype.setAdVolume=function(a){return this.video?(this.video.volume=a,this.video.volume):0},d.prototype.appendVideo=function(){this.video.parentNode||(this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Video slot got no parent node, appending to container"),this.container.appendChild(this.video))},d.prototype.removeVideo=function(){try{this.video.parentNode.removeChild(this.video)}catch(b){this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"teads-vpaid-video, cannot remove video from DOM")}},d.prototype.sendAdVideoStartEvent=function(){this.videoHasStarted||(this.videoHasStarted=!0,this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdVideoStart))},d.prototype.setSize=function(a,b){this.width=a,this.height=b,this.video&&(this.video.width=this.width,this.video.height=this.height),this.clickThrough&&this.clickThrough.resize(a,b)},d.prototype.initListeners=function(){var a=this;for(var b in this.eventMap)this.video.addEventListener(b,function(b){a.handleVideoEvent(b)},!1)},d.prototype.handleVideoEvent=function(b){try{var c=this.eventMap[b.type];switch(b.type){case"pause":if(this.video.currentTime===this.video.duration||this.status<=a.vpaid.VpaidStatus.SKIPPING)return;break;case"play":case"playing":if(this.status===a.vpaid.VpaidStatus.STARTED)return this.sendAdVideoStartEvent();if(this.status!==a.vpaid.VpaidStatus.PAUSED)return;break;case"timeupdate":this.parameters.skippable&&!this.skippable&&this.video.currentTime>=Number(this.parameters.skipoffset)&&(this.skippable=!0,this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdSkippableStateChange)),this.videoHasStarted||this.sendAdVideoStartEvent()}this.dispatchVpaidEvent(c)}catch(d){var e='Creative threw an exception when handling "'+b.type+'" HTML5 video event: '+d.toString();this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,e),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdError,e)}},d}(b.BaseVPAIDCreative);b.VPAIDVideo=c}(b=a.video||(a.video={}))}(teads||(teads={}));var teads;!function(a){var b;!function(b){window.getVPAIDAd=function(){return new c};var c=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.initAd=function(c,d,e,f,g,h){var i=this;try{h.videoSlot&&h.videoSlot.parentNode&&h.videoSlot.parentNode.removeChild(h.videoSlot);var j=a.AdParameterHelper.decode(g);h.videoSlot=new a.canvas.player.CanvasPlayer(h.slot,c,d,g.assetsPath),h.videoSlot.addEventListener(a.canvas.player.model.mediaEvents.ERROR,function(a){return i.dispatchVpaidEvent(i.eventMap[a.type])}),b.prototype.initAd.call(this,c,d,e,f,j,h)}catch(k){this.handleException(k,"initAd")}},c.prototype.startAd=function(){if(this.status>a.vpaid.VpaidStatus.LOADED)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"try to call startAd but ad is starting or is already started");if(this.status<a.vpaid.VpaidStatus.LOADED)return void this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdLog,"Ad is not loaded, use initAd first");try{b.prototype.startAd.call(this),this.dispatchVpaidEvent(a.vpaid.VPAIDEvent.AdDurationChange)}catch(c){this.handleException(c,"startAd")}},c.prototype.appendVideo=function(){},c.prototype.removeVideo=function(){this.video.pause(),this.container.removeChild(this.video.canvas)},c}(b.VPAIDVideo);b.VPAIDCanvas=c}(b=a.video||(a.video={}))}(teads||(teads={}));
//# sourceMappingURL=teads-vpaid-canvas.min.js.map