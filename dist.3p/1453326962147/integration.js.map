{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","3p/integration.js","3p/polyfills.js","3p/twitter.js","ads/a9.js","ads/adreactor.js","ads/adsense.js","ads/adtech.js","ads/doubleclick.js","ads/teads.js","src/3p.js","src/asserts.js","src/url.js","third_party/babel/custom-babel-helpers.js"],"names":[],"mappings":"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","file":"integration.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Registers all known ad network factories and then executes\n * one of them.\n *\n * This files gets minified and published to\n * https://3p.ampproject.net/$version/f.js\n */\n\nimport './polyfills';\nimport {teads} from '../ads/teads';\nimport {a9} from '../ads/a9';\nimport {adreactor} from '../ads/adreactor';\nimport {adsense} from '../ads/adsense';\nimport {adtech} from '../ads/adtech';\nimport {doubleclick} from '../ads/doubleclick';\nimport {twitter} from './twitter';\nimport {register, run} from '../src/3p';\nimport {parseUrl} from '../src/url';\nimport {assert} from '../src/asserts';\n\nregister('teads', teads);\nregister('a9', a9);\nregister('adreactor', adreactor);\nregister('adsense', adsense);\nregister('adtech', adtech);\nregister('doubleclick', doubleclick);\nregister('_ping_', function(win, data) {\n  win.document.getElementById('c').textContent = data.ping;\n});\nregister('twitter', twitter);\n\n/**\n * Visible for testing.\n * Draws a 3p embed to the window. Expects the data to include the 3p type.\n * @param {!Window} win\n * @param {!Object} data\n * @param {function(!Object, function(!Object))|undefined} configCallback\n *     Optional callback that allows user code to manipulate the incoming\n *     configuration. See\n *     https://github.com/ampproject/amphtml/issues/1210 for some context\n *     on this.\n */\nexport function draw3p(win, data, configCallback) {\n  const type = data.type;\n  assert(win.context.location.originValidated != null,\n      'Origin should have been validated');\n  if (configCallback) {\n    configCallback(data, data => {\n      assert(data, 'Expected configuration to be passed as first argument');\n      run(type, win, data);\n    });\n  } else {\n    run(type, win, data);\n  }\n};\n\n/**\n * Returns the \"master frame\" for all widgets of a given type.\n * This frame should be used to e.g. fetch scripts that can\n * be reused across frames.\n * @param {string} type\n * @return {!Window}\n */\nfunction masterSelection(type) {\n  // The master has a special name.\n  const masterName = 'frame_' + type + '_master';\n  let master;\n  try {\n    // Try to get the master from the parent. If it does not\n    // exist yet we get a security exception that we catch\n    // and ignore.\n    master = window.parent.frames[masterName];\n  } catch (expected) {\n    /* ignore */\n  }\n  if (!master) {\n    // No master yet, rename ourselves to be master. Yaihh.\n    window.name = masterName;\n    master = window;\n  }\n  return master;\n}\n\n/**\n * Draws an embed, optionally synchronously, to the DOM.\n * @param {function(!Object, function(!Object))} opt_configCallback If provided\n *     will be invoked with two arguments:\n *     1. The configuration parameters supplied to this embed.\n *     2. A callback that MUST be called for rendering to proceed. It takes\n *        no arguments. Configuration is expected to be modified in-place.\n */\nwindow.draw3p = function(opt_configCallback) {\n  const data = parseFragment(location.hash);\n  window.context = data._context;\n  window.context.location = parseUrl(data._context.location.href);\n  validateParentOrigin(window, window.context.location);\n  window.context.master = masterSelection(data.type);\n  window.context.isMaster = window.context.master == window;\n  window.context.data = data;\n  window.context.noContentAvailable = triggerNoContentAvailable;\n  if (data.type == 'twitter') {\n    // Only make this available to Twitter for now while\n    // https://github.com/ampproject/amphtml/issues/728\n    // is being implemented.\n    window.context.updateDimensions = triggerDimensions;\n  }\n  // This only actually works for ads.\n  window.context.observeIntersection = observeIntersection;\n  delete data._context;\n  draw3p(window, data, opt_configCallback);\n};\n\nfunction triggerNoContentAvailable() {\n  nonSensitiveDataPostMessage('no-content');\n}\n\nfunction triggerDimensions(width, height) {\n  nonSensitiveDataPostMessage('embed-size', {\n    width: width,\n    height: height,\n  });\n}\n\nfunction nonSensitiveDataPostMessage(type, opt_object) {\n  if (window.parent == window) {\n    return;  // Nothing to do.\n  }\n  const object = opt_object || {};\n  object.type = type;\n  object.sentinel = 'amp-3p';\n  window.parent./*OK*/postMessage(object,\n      window.context.location.origin);\n}\n\n/**\n * Registers a callback for intersections of this iframe with the current\n * viewport.\n * The passed in array has entries that aim to be compatible with\n * the IntersectionObserver spec callback.\n * http://rawgit.com/slightlyoff/IntersectionObserver/master/index.html#callbackdef-intersectionobservercallback\n * @param {function(!Array<IntersectionObserverEntry>)} observerCallback\n */\nfunction observeIntersection(observerCallback) {\n  // Send request to received records.\n  nonSensitiveDataPostMessage('send-intersections');\n  window.addEventListener('message', function(event) {\n    if (event.source != window.parent ||\n        event.origin != window.context.location.origin ||\n        !event.data ||\n        event.data.sentinel != 'amp-3p' ||\n        event.data.type != 'intersection') {\n      return;\n    }\n    observerCallback(event.data.changes);\n  });\n}\n\n/**\n * Throws if the current frame's parent origin is not equal to\n * the claimed origin.\n * For browsers that don't support ancestorOrigins it adds\n * `originValidated = false` to the location object.\n * @param {!Window} window\n * @param {!Location} parentLocation\n * @visibleForTesting\n */\nexport function validateParentOrigin(window, parentLocation) {\n  const ancestors = window.location.ancestorOrigins;\n  // Currently only webkit and blink based browsers support\n  // ancestorOrigins. In that case we proceed but mark the origin\n  // as non-validated.\n  if (!ancestors || !ancestors.length) {\n    parentLocation.originValidated = false;\n    return;\n  }\n  assert(ancestors[0] == parentLocation.origin,\n      'Parent origin mismatch: %s, %s, %s',\n      ancestors[0], parentLocation.origin);\n  parentLocation.originValidated = true;\n}\n\n/**\n * Expects the fragment to contain JSON.\n * @param {string} fragment Value of location.fragment\n * @return {!JSONObject}\n * @visibleForTesting\n */\nexport function parseFragment(fragment) {\n  let json = fragment.substr(1);\n  // Some browser, notably Firefox produce an encoded version of the fragment\n  // while most don't. Since we know how the string should start, this is easy\n  // to detect.\n  if (json.indexOf('{%22') == 0) {\n    json = decodeURIComponent(json);\n  }\n  return json ? JSON.parse(json) : {};\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Loads all polyfills needed by the AMP 3p integration frame.\n */\n\n\n// This list should not get longer without a very good reason.\nimport '../third_party/babel/custom-babel-helpers';\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// TODO(malteubl) Move somewhere else since this is not an ad.\n\nimport {loadScript} from '../src/3p';\n\n/**\n * Produces the Twitter API object for the passed in callback. If the current\n * frame is the master frame it makes a new one by injecting the respective\n * script, otherwise it schedules the callback for the script from the master\n * window.\n * @param {!Window} global\n * @param {function(!Object)} cb\n */\nfunction getTwttr(global, cb) {\n  if (context.isMaster) {\n    global.twttrCbs = [cb];\n    loadScript(global, 'https://platform.twitter.com/widgets.js', () => {\n      for (let i = 0; i < global.twttrCbs.length; i++) {\n        global.twttrCbs[i](global.twttr);\n      }\n      global.twttrCbs.push = function(cb) {\n        cb(global.twttr);\n      };\n    });\n  } else {\n    // Because we rely on this global existing it is important that\n    // this array is created synchronously after master selection.\n    context.master.twttrCbs.push(cb);\n  }\n}\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function twitter(global, data) {\n  const tweet = document.createElement('div');\n  tweet.id = 'tweet';\n  tweet.style.width = '100%';\n  global.document.getElementById('c').appendChild(tweet);\n  getTwttr(global, function(twttr) {\n    // Dimensions are given by the parent frame.\n    delete data.width;\n    delete data.height;\n    twttr.widgets.createTweet(data.tweetid, tweet, data)./*OK*/then(() => {\n      const iframe = global.document.querySelector('#c iframe');\n      // Unfortunately the tweet isn't really done at this time.\n      // We listen for resize to learn when things are\n      // really done.\n      iframe.contentWindow.addEventListener('resize', function() {\n        render();\n      }, true);\n      render();\n    });\n  });\n\n\n  function render() {\n    const iframe = global.document.querySelector('#c iframe');\n    const body = iframe.contentWindow.document.body;\n    context.updateDimensions(\n        body./*OK*/offsetWidth,\n        body./*OK*/offsetHeight + /* margins */ 20);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, checkData} from '../src/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function a9(global, data) {\n  checkData(data, ['aax_size', 'aax_pubname', 'aax_src']);\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global.aax_size = data.aax_size;\n  global.aax_pubname = data.aax_pubname;\n  global.aax_src = data.aax_src;\n  writeScript(global, 'https://c.amazon-adsystem.com/aax2/assoc.js');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, checkData} from '../src/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adreactor(global, data) {\n  checkData(data, ['zid', 'pid', 'custom3']);\n  const url = 'https://adserver.adreactor.com' +\n      '/servlet/view/banner/javascript/zone?' +\n      'zid=' + encodeURIComponent(data.zid) +\n      '&pid=' + encodeURIComponent(data.pid) +\n      '&custom3=' + encodeURIComponent(data.custom3) +\n      '&random=' + Math.floor(89999999 * Math.random() + 10000000) +\n      '&millis=' + new Date().getTime();\n  writeScript(global, url);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {checkData} from '../src/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adsense(global, data) {\n  checkData(data, ['adClient', 'adSlot']);\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  global.google_page_url = global.context.canonicalUrl;\n  const s = document.createElement('script');\n  s.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';\n  global.document.body.appendChild(s);\n\n  const i = document.createElement('ins');\n  i.setAttribute('data-ad-client', data['adClient']);\n  if (data['adSlot']) {\n    i.setAttribute('data-ad-slot', data['adSlot']);\n  }\n  i.setAttribute('class', 'adsbygoogle');\n  i.style.cssText = 'display:inline-block;width:100%;height:100%;';\n  global.document.getElementById('c').appendChild(i);\n  (global.adsbygoogle = global.adsbygoogle || []).push({});\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {writeScript, validateSrcPrefix, validateSrcContains} from '../src/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function adtech(global, data) {\n  const src = data.src;\n  validateSrcPrefix('https:', src);\n  validateSrcContains('/addyn/', src);\n  writeScript(global, src);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript, checkData} from '../src/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function doubleclick(global, data) {\n  checkData(data, [\n    'slot', 'targeting', 'categoryExclusion',\n    'tagForChildDirectedTreatment', 'cookieOptions'\n  ]);\n  loadScript(global, 'https://www.googletagservices.com/tag/js/gpt.js', () => {\n    global.googletag.cmd.push(function() {\n      const googletag = global.googletag;\n      const dimensions = [[\n        parseInt(data.width, 10),\n        parseInt(data.height, 10)\n      ]];\n      const pubads = googletag.pubads();\n      const slot = googletag.defineSlot(data.slot, dimensions, 'c')\n          .addService(pubads);\n      pubads.enableSingleRequest();\n      pubads.markAsAmp();\n      pubads.set('page_url', context.canonicalUrl);\n      googletag.enableServices();\n\n      if (data.targeting) {\n        for (const key in data.targeting) {\n          slot.setTargeting(key, data.targeting[key]);\n        }\n      }\n\n      if (data.categoryExclusion) {\n        slot.setCategoryExclusion(data.categoryExclusion);\n      }\n\n      if (data.tagForChildDirectedTreatment != undefined) {\n        pubads.setTagForChildDirectedTreatment(\n            data.tagForChildDirectedTreatment);\n      }\n\n      if (data.cookieOptions) {\n        pubads.setCookieOptions(data.cookieOptions);\n      }\n\n      pubads.addEventListener('slotRenderEnded', function(event) {\n        if (event.isEmpty) {\n          context.noContentAvailable();\n        }\n      });\n\n      // Exported for testing.\n      c.slot = slot;\n      googletag.display('c');\n    });\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {loadScript} from '../src/3p';\n\n/**\n * @param {!Window} global\n * @param {!Object} data\n */\nexport function teads(global, data) {\n\n  // temp teads tag for POC\n  global._ttp = {};\n  global._ttp[0] = [{\n    pid: 123,\n    format: 'inboard',\n    slot: {\n      selector: '#c',\n      insertInside: true,\n      minimum: 1\n    }\n  }];\n\n  global._tta = {};\n  global._tta[0] = [{\n    type: 'VastUrl',\n    content: 'https://a.teads.tv/vast/get/26841',\n    settings: {\n      values: {\n        threshold: 50,\n        pageId: 0,\n        placementId: 123,\n        placementFormat: 'inboard'\n      },\n      components: {},\n      behaviors: {\n        launch: 'auto',\n        videoStart: 'auto',\n        videoPause: 'no'\n      }\n    }\n  }];\n\n  window.context.observeIntersection(function(changes) {\n    changes.forEach(function(c) {\n      //console.info('TEADS', 'Height of intersection', c.intersectionRect.height);\n      if (c.intersectionRect.height <= 125 && global.teads.instances && global.teads.instances.inboard.length) {\n        global.teads.instances.inboard[0].vpaidAd.pauseAd()\n        console.log('PAUSE')\n      } else if (global.teads.instances && global.teads.instances.inboard.length) {\n        global.teads.instances.inboard[0].vpaidAd.resumeAd()\n        console.log('PLAY')\n      }\n    });\n  });\n\n  // temp dev env for POC\n  global.teads = {\n    ASSETS_URL: 'https://ebuzzing.github.io/amphtml/extensions/amp-teads/0.1/temp_teads_dist'\n  }\n\n  loadScript(global, 'https://ebuzzing.github.io/amphtml/extensions/amp-teads/0.1/temp_teads_dist/teads-format.min.js');\n  //window.context.noContentAvailable()\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Utility functions for scripts running inside of a third\n * party iframe.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\n\n\nimport {assert} from './asserts';\n\n\n/** @typedef {function(!Window, !Object)}  */\nlet ThirdPartyFunctionDef;\n\n\n/**\n * @const {!Object<ThirdPartyFunctionDef>}\n * @visibleForTesting\n */\nexport const registrations = {};\n\n/** @type {number} */\nlet syncScriptLoads = 0;\n\n/**\n * @param {string} id The specific 3p integration.\n * @param {ThirdPartyFunctionDef} draw Function that draws the 3p integration.\n */\nexport function register(id, draw) {\n  assert(!registrations[id], 'Double registration %s', id);\n  registrations[id] = draw;\n}\n\n/**\n * Execute the 3p integration with the given id.\n * @param {id} id\n * @param {!Window} win\n * @param {!Object} data\n */\nexport function run(id, win, data) {\n  const fn = registrations[id];\n  assert(fn, 'Unknown 3p: ' + id);\n  fn(win, data);\n}\n\n/**\n * Synchronously load the given script URL. Only use this if you need a sync\n * load. Otherwise use {@link loadScript}.\n * Supports taking a callback that will be called synchronously after the given\n * script was executed.\n * @param {!Window} win\n * @param {string} url\n * @param {function()=} opt_cb\n */\nexport function writeScript(win, url, opt_cb) {\n  /*eslint no-useless-concat: 0*/\n  win.document\n      .write('<' + 'script src=\"' + encodeURI(url) + '\"><' + '/script>');\n  if (opt_cb) {\n    executeAfterWriteScript(win, opt_cb);\n  }\n}\n\n/**\n * Asynchronously load the given script URL.\n * @param {!Window} win\n * @param {string} url\n * @param {function()=} cb\n */\nexport function loadScript(win, url, cb) {\n  const s = win.document.createElement('script');\n  s.src = url;\n  s.onload = cb;\n  win.document.body.appendChild(s);\n}\n\n/**\n * Run the function after all currently waiting sync scripts have been\n * executed.\n * @param {!Window} win\n * @param {function()} fn\n */\nfunction executeAfterWriteScript(win, fn) {\n  const index = syncScriptLoads++;\n  win['__runScript' + index] = fn;\n  win.document.write('<' + 'script>__runScript' + index + '()<' + '/script>');\n}\n\n/**\n * Throws if the given src doesn't start with prefix.\n * @param {string} prefix\n * @param {string} src\n */\nexport function validateSrcPrefix(prefix, src) {\n  if (src.indexOf(prefix) !== 0) {\n    throw new Error('Invalid src ' + src);\n  }\n}\n\n/**\n * Throws if the given src doesn't contain the string\n * @param {string} string\n * @param {string} src\n */\nexport function validateSrcContains(string, src) {\n  if (src.indexOf(string) === -1) {\n    throw new Error('Invalid src ' + src);\n  }\n}\n\n/**\n * Throws a non-interrupting exception if data contains a field not supported\n * by this embed type.\n * @param {!Object} data\n * @param {!Array<string>} allowedFields\n */\nexport function checkData(data, allowedFields) {\n  // Throw in a timeout, because we do not want to interrupt execution,\n  // because that would make each removal an instant backward incompatible\n  // change.\n  try {\n    validateData(data, allowedFields);\n  } catch (e) {\n    setTimeout(() => {\n      throw e;\n    });\n  }\n}\n\n/**\n * Throws an exception if data contains a field not supported\n * by this embed type.\n * @param {!Object} data\n * @param {!Array<string>} allowedFields\n */\nexport function validateData(data, allowedFields) {\n  const defaultAvailableFields = {\n    width: true,\n    height: true,\n    initialWindowWidth: true,\n    initialWindowHeight: true,\n    type: true,\n    referrer: true,\n    canonicalUrl: true,\n    pageViewId: true,\n    location: true,\n    mode: true,\n  };\n  for (const field in data) {\n    if (!data.hasOwnProperty(field) ||\n        field in defaultAvailableFields) {\n      continue;\n    }\n    assert(allowedFields.indexOf(field) != -1,\n        'Unknown attribute for %s: %s.', data.type, field);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n/**\n * Throws an error if the first argument isn't trueish.\n *\n * Supports argument substitution into the message via %s placeholders.\n *\n * Throws an error object that has two extra properties:\n * - associatedElement: This is the first element provided in the var args.\n *   It can be used for improved display of error messages.\n * - messageArray: The elements of the substituted message as non-stringified\n *   elements in an array. When e.g. passed to console.error this yields\n *   native displays of things like HTML elements.\n *\n * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n *     not evaluate to true.\n * @param {string} message The assertion message\n * @param {...*} var_args Arguments substituted into %s in the message.\n * @return {T} The value of shouldBeTrueish.\n * @template T\n */\n/*eslint \"google-camelcase/google-camelcase\": 0*/\nexport function assert(shouldBeTrueish, message, var_args) {\n  let firstElement;\n  if (!shouldBeTrueish) {\n    message = message || 'Assertion failed';\n    const splitMessage = message.split('%s');\n    const first = splitMessage.shift();\n    let formatted = first;\n    const messageArray = [];\n    pushIfNonEmpty(messageArray, first);\n    for (let i = 2; i < arguments.length; i++) {\n      const val = arguments[i];\n      if (val && val.tagName) {\n        firstElement = val;\n      }\n      const nextConstant = splitMessage.shift();\n      messageArray.push(val);\n      pushIfNonEmpty(messageArray, nextConstant.trim());\n      formatted += toString(val) + nextConstant;\n    }\n    const e = new Error(formatted);\n    e.fromAssert = true;\n    e.associatedElement = firstElement;\n    e.messageArray = messageArray;\n    throw e;\n  }\n  return shouldBeTrueish;\n}\n/*eslint \"google-camelcase/google-camelcase\": 2*/\n\n/**\n * @param {*} val\n * @return {string}\n */\nfunction toString(val) {\n  if (val instanceof Element) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return val;\n}\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './asserts';\n\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * @param {string} url\n * @return {!Location}\n */\nexport function parseUrl(url) {\n  const a = document.createElement('a');\n  a.href = url;\n  const info = {\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash\n  };\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  info.origin = (a.origin && a.origin != 'null') ? a.origin : getOrigin(info);\n  assert(info.origin, 'Origin must exist');\n  return info;\n}\n\n\n/**\n * Asserts that a given url is HTTPS or protocol relative.\n * Provides an exception for localhost.\n * @param {string} urlString\n * @param {!Element} elementContext Element where the url was found.\n * @return {string}\n */\nexport function assertHttpsUrl(urlString, elementContext) {\n  const url = parseUrl(urlString);\n  assert(\n      url.protocol == 'https:' || /^(\\/\\/)/.test(urlString) ||\n      url.hostname == 'localhost' ||\n          url.hostname.lastIndexOf('.localhost') ==\n          // Poor person's endsWith\n          url.hostname.length - '.localhost'.length,\n      '%s source must start with ' +\n      '\"https://\" or \"//\" or be relative and served from ' +\n      'either https or from localhost. Invalid value: %s',\n      elementContext, urlString);\n  return urlString;\n}\n\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n * @param {string} queryString\n * @return {!Object<string, string>}\n */\nexport function parseQueryString(queryString) {\n  const params = Object.create(null);\n  if (!queryString) {\n    return params;\n  }\n  if (queryString.indexOf('?') == 0 || queryString.indexOf('#') == 0) {\n    queryString = queryString.substr(1);\n  }\n  const pairs = queryString.split('&');\n  for (let i = 0; i < pairs.length; i++) {\n    const pair = pairs[i];\n    const eqIndex = pair.indexOf('=');\n    let name;\n    let value;\n    if (eqIndex != -1) {\n      name = decodeURIComponent(pair.substring(0, eqIndex)).trim();\n      value = decodeURIComponent(pair.substring(eqIndex + 1)).trim();\n    } else {\n      name = decodeURIComponent(pair).trim();\n      value = '';\n    }\n    if (name) {\n      params[name] = value;\n    }\n  }\n  return params;\n}\n\n\n/**\n * Don't use this directly, only exported for testing. The value\n * is available via the origin property of the object returned by\n * parseUrl.\n * @param {!Location} info\n * @return {string}\n * @visibleForTesting\n */\nexport function getOrigin(info) {\n  if (info.protocol == 'data:' || !info.host) {\n    return info.href;\n  }\n  return info.protocol + '//' + info.host;\n}\n\n\n/**\n * Returns the URL without fragment. If URL doesn't contain fragment, the same\n * string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function removeFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return url;\n  }\n  return url.substring(0, index);\n}\n","(function (global) {\n  var babelHelpers = global.babelHelpers = {};\n\n  babelHelpers.inherits = function (subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  };\n\n  babelHelpers.createClass = (function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  })();\n\n  babelHelpers.slice = Array.prototype.slice;\n  babelHelpers.bind = Function.prototype.bind;\n\n  babelHelpers.interopRequireWildcard = function (obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n        }\n      }\n\n      newObj[\"default\"] = obj;\n      return newObj;\n    }\n  };\n\n  babelHelpers.get = function get(object, property, receiver) {\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        return get(parent, property, receiver);\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  };\n\n  babelHelpers.classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n})(typeof global === \"undefined\" ? self : global);\n"]}