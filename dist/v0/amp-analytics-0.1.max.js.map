{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","build/all/v0/amp-analytics-0.1.max.js","build/all/v0/instrumentation.js","build/all/v0/transport.js","build/all/v0/vendors.js","node_modules/browserify/node_modules/process/browser.js","src/asserts.js","src/cid.js","src/cookies.js","src/document-info.js","src/event-helper.js","src/experiments.js","src/log.js","src/mode.js","src/observable.js","src/service.js","src/service/cid-impl.js","src/string.js","src/timer.js","src/url-replacements.js","src/url.js","src/user-notification.js","src/viewer.js","src/viewport.js","src/vsync.js","src/xhr.js","third_party/closure-library/sha384-generated.js"],"names":[],"mappings":"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CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,GAAC,CAAC,CAAC,CAAC,EAAC,CAAC,GAAC,CAAC,CAAC,CAAC,EAAC,EAAE,GAAC,CAAC,CAAC,CAAC,EAAC,EAAE,GAAC,CAAC,CAAC,CAAC,EAAC,CAAC,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAAC,CAAC,CAAC,KAAG,EAAE,GAAC,CAAC,IAAE,EAAE,GAAC,CAAC,KAAG,EAAE,GAAC,CAAC,IAAE,EAAE,GAAC,CAAC,KAAG,CAAC,GAAC,CAAC,IAAE,EAAE,EAAC,CAAC,KAAG,EAAE,GAAC,CAAC,IAAE,EAAE,GAAC,CAAC,KAAG,EAAE,GAAC,CAAC,IAAE,EAAE,GAAC,CAAC,KAAG,CAAC,GAAC,CAAC,IAAE,EAAE,CAAC,EAAC,IAAI,CAAC,CAAC,EAAE,GAAC,CAAC,CAAC,CAAC,GAAC,CAAC,EAAE,GAAC,CAAC,CAAC,CAAC,EAAC,EAAE,GAAC,CAAC,CAAC,CAAC,GAAC,CAAC,EAAE,GAAC,CAAC,CAAC,CAAC,CAAC,EAAC,EAAE,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAC,CAAC,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","file":"amp-analytics-0.1.max.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assertHttpsUrl} from '../../../src/url';\nimport {isExperimentOn} from '../../../src/experiments';\nimport {installCidService} from '../../../src/service/cid-impl';\nimport {log} from '../../../src/log';\nimport {urlReplacementsFor} from '../../../src/url-replacements';\nimport {expandTemplate} from '../../../src/string';\nimport {xhrFor} from '../../../src/xhr';\n\nimport {addListener} from './instrumentation';\nimport {sendRequest} from './transport';\nimport {ANALYTICS_CONFIG} from './vendors';\n\n\ninstallCidService(AMP.win);\n\n\n/** @const */\nconst EXPERIMENT = 'amp-analytics';\n\nexport class AmpAnalytics extends AMP.BaseElement {\n\n  /**\n   * @return {boolean}\n   * @private\n   */\n  isExperimentOn_() {\n    return isExperimentOn(this.getWin(), EXPERIMENT);\n  }\n\n  /** @override */\n  isLayoutSupported(unusedLayout) {\n    return true;\n  }\n\n  /**\n   * @override\n   */\n  createdCallback() {\n    if (!this.isExperimentOn_()) {\n      return;\n    }\n\n    /**\n     * @const {!JSONObject} Copied here for tests.\n     * @private\n     */\n    this.predefinedConfig_ = ANALYTICS_CONFIG;\n  }\n\n  /** @override */\n  layoutCallback() {\n    if (!this.isExperimentOn_()) {\n      return Promise.resolve();\n    }\n\n    this.element.setAttribute('aria-hidden', 'true');\n\n    /**\n     * @private {?string} Predefinedtype associated with the tag. If specified,\n     * the config from the predefined type is merged with the inline config\n     */\n    this.type_ = null;\n\n    /**\n     * @private {Object<string, string>} A map of request names to the request\n     * format string used by the tag to send data\n     */\n    this.requests_ = {};\n\n    /**\n     * @private {JSONObject}\n     */\n    this.remoteConfig = {};\n\n    return this.fetchRemoteConfig_().then(() => {\n      /**\n       * @private {!JSONObject} The analytics config associated with the tag\n       */\n      this.config_ = this.mergeConfigs_();\n\n      if (this.hasOptedOut_()) {\n        // Nothing to do when the user has opted out.\n        log.fine(this.getName_(), 'User has opted out. No hits will be sent.');\n        return Promise.resolve();\n      }\n\n      this.generateRequests_();\n\n      if (!this.config_['triggers']) {\n        log.error(this.getName_(), 'No triggers were found in the config. No ' +\n            'analytics data will be sent.');\n        return Promise.resolve();\n      }\n\n      // Trigger callback can be synchronous. Do the registration at the end.\n      for (const k in this.config_['triggers']) {\n        if (this.config_['triggers'].hasOwnProperty(k)) {\n          const trigger = this.config_['triggers'][k];\n          if (!trigger['on'] || !trigger['request']) {\n            log.warn(this.getName_(), '\"on\" and \"request\" attributes are ' +\n                'required for data to be collected.');\n            continue;\n          }\n          addListener(this.getWin(), trigger['on'],\n              this.handleEvent_.bind(this, trigger), trigger['selector']);\n        }\n      }\n    });\n  }\n\n  /**\n   * Returns a promise that resolves when remote config is ready (or\n   * immediately if no remote config is specified.)\n   * @private\n   * @return {!Promise<>}\n   */\n  fetchRemoteConfig_() {\n    const remoteConfigUrl = this.element.getAttribute('config');\n    if (!remoteConfigUrl) {\n      return Promise.resolve();\n    }\n    assertHttpsUrl(remoteConfigUrl);\n    log.fine(this.getName_(), 'Fetching remote config', remoteConfigUrl);\n    return xhrFor(this.getWin()).fetchJson(remoteConfigUrl).then(jsonValue => {\n      this.remoteConfig_ = jsonValue;\n      log.fine(this.getName_(), 'Remote config loaded', remoteConfigUrl);\n    }, err => {\n      log.warn(this.getName_(), 'Error loading remote config',\n          remoteConfigUrl, err);\n    });\n  }\n\n  /**\n   * Merges various sources of configs and stores them in a member variable.\n   *\n   * Order of precedence for configs from highest to lowest:\n   * - Remote config: specified through an attribute of the tag.\n   * - Inline config: specified insize the tag.\n   * - Predefined config: Defined as part of the platform.\n   * - Default config: Built-in config shared by all amp-analytics tags.\n   *\n   * @private\n   * @return {!JSONObject}\n   */\n  mergeConfigs_() {\n    let inlineConfig = {};\n    try {\n      const children = this.element.children;\n      if (children.length == 1) {\n        const child = children[0];\n        if (child.tagName.toUpperCase() == 'SCRIPT' &&\n            child.getAttribute('type').toUpperCase() == 'APPLICATION/JSON') {\n          inlineConfig = JSON.parse(children[0].textContent);\n        } else {\n          log.warn(this.getName_(), 'The analytics config should be put in a ' +\n              '<script> tag with type=application/json');\n        }\n      } else if (children.length > 1) {\n        log.warn(this.getName_(),\n            'The tag should contain only one <script> child.');\n      }\n    }\n    catch (er) {\n      log.warn(this.getName_(), 'Analytics config could not be parsed. ' +\n          'Is it in a valid JSON format?', er);\n    }\n\n    const config = {};\n    const defaultConfig = this.predefinedConfig_['default'] || {};\n    const typeConfig = this.predefinedConfig_[\n      this.element.getAttribute('type')] || {};\n\n    config['vars'] = config['vars'] || {};\n\n    this.mergeObjects_(defaultConfig, config);\n    this.mergeObjects_(typeConfig, config);\n    this.mergeObjects_(inlineConfig, config);\n    this.mergeObjects_(this.remoteConfig_, config);\n    return config;\n  }\n\n  /**\n   * @return {boolean} true if the user has opted out.\n   */\n  hasOptedOut_() {\n    if (!this.config_['optout']) {\n      return false;\n    }\n\n    const props = this.config_['optout'].split('.');\n    let k = this.getWin();\n    for (let i = 0; i < props.length; i++) {\n      if (!k) {\n        return false;\n      }\n      k = k[props[i]];\n    }\n    return k();\n  }\n\n  /**\n   * Goes through all the requests in predefined vendor config and tag's config\n   * and creates a map of request name to request template. These requests can\n   * then be used while sending a request to a server.\n   *\n   * @private\n   */\n  generateRequests_() {\n    const requests = {};\n    if (!this.config_ || !this.config_['requests']) {\n      log.error(this.getName_(), 'No request strings defined. Analytics data ' +\n          'will not be sent from this page.');\n      return;\n    }\n    for (const k in this.config_['requests']) {\n      if (this.config_['requests'].hasOwnProperty(k)) {\n        requests[k] = this.config_['requests'][k];\n      }\n    }\n    this.requests_ = requests;\n\n    // Expand any placeholders. For requests, we expand each string up to 5\n    // times to support nested requests. Leave any unresolved placeholders.\n    for (const k in this.requests_) {\n      this.requests_[k] = expandTemplate(this.requests_[k], key => {\n        return this.requests_[key] || '${' + key + '}';\n      }, 5);\n    }\n  }\n\n  /**\n   * Callback for events that are registered by the config's triggers. This\n   * method generates the request and sends the request out.\n   *\n   * @param {!JSONObject} trigger JSON config block that resulted in this event.\n   * @param {!Object} unusedEvent Object with details about the event.\n   * @private\n   */\n  handleEvent_(trigger, unusedEvent) {\n    let request = this.requests_[trigger['request']];\n    if (!request) {\n      log.warn(this.getName_(),\n          'Ignoring event. Request string not found', trigger['request']);\n      return;\n    }\n\n    // Replace placeholders with URI encoded values.\n    // Precedence is trigger.vars > config.vars.\n    // Nested expansion not supported.\n    request = expandTemplate(request, key => {\n      const match = key.match(/([^(]*)(\\([^)]*\\))?/);\n      const name = match[1];\n      const argList = match[2] || '';\n      const val = encodeURIComponent(\n          (trigger['vars'] && trigger['vars'][name]) ||\n          (this.config_['vars'] && this.config_['vars'][name]) || '');\n      return val + argList;\n    });\n\n    // For consistentcy with amp-pixel we also expand any url replacements.\n    urlReplacementsFor(this.getWin()).expand(request).then(\n        request => this.sendRequest_(request));\n  }\n\n  /**\n   * @param {string} request The full request string to send.\n   * @private\n   */\n  sendRequest_(request) {\n    if (!request) {\n      log.warn(this.getName_(), 'Request not sent. Contents empty.');\n      return;\n    }\n    sendRequest(this.getWin(), request, this.config_['transport'] || {});\n  }\n\n  /**\n   * @return {string} Returns a string to identify this tag. May not be unique\n   * if the element id is not unique.\n   * @private\n   */\n  getName_() {\n    return 'AmpAnalytics ' +\n        (this.element.getAttribute('id') || '<unknown id>');\n  }\n\n  /**\n   * Merges two objects. If the value is array or plain object, the values are\n   * merged otherwise the value is overwritten.\n   *\n   * @param {Object|Array} from Object or array to merge from\n   * @param {Object|Array} to Object or Array to merge into\n   * @private\n   */\n  mergeObjects_(from, to) {\n    // Checks if the given object is a plain object.\n    const isObject = function(someObj) {\n      return Object.prototype.toString.call(someObj) === '[object Object]';\n    };\n\n    if (to === null || to === undefined) {\n      to = {};\n    }\n\n    for (const property in from) {\n      if (from.hasOwnProperty(property)) {\n        // Only deal with own properties.\n        if (Array.isArray(from[property])) {\n          if (!Array.isArray(to[property])) {\n            to[property] = [];\n          }\n          to[property] = this.mergeObjects_(from[property], to[property]);\n        } else if (isObject(from[property])) {\n          if (!isObject(to[property])) {\n            to[property] = {};\n          }\n          to[property] = this.mergeObjects_(from[property], to[property]);\n        } else {\n          to[property] = from[property];\n        }\n      }\n    }\n    return to;\n  }\n}\n\nAMP.registerElement('amp-analytics', AmpAnalytics);\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getService} from '../../../src/service';\nimport {viewerFor} from '../../../src/viewer';\nimport {Observable} from '../../../src/observable';\nimport {log} from '../../../src/log';\n\n/**\n * This type signifies a callback that gets called when an analytics event that\n * the listener subscribed to fires.\n * @typedef {function(!AnalyticsEvent)}\n */\nlet AnalyticsEventListenerDef;\n\n/**\n * @param {!Window} window Window object to listen on.\n * @param {!AnalyticsEventType} type Event type to listen to.\n * @param {!AnalyticsEventListenerDef} listener Callback to call when the event\n *          fires.\n * @param {string=} opt_selector If specified, the given listener\n *   should only be called if the event target matches this selector.\n */\nexport function addListener(window, type, listener, opt_selector) {\n  return instrumentationServiceFor(window).addListener(\n      type, listener, opt_selector);\n}\n\n/**\n * Events that can result in analytics data to be sent.\n * @const\n * @enum {string}\n */\nexport const AnalyticsEventType = {\n  VISIBLE: 'visible',\n  CLICK: 'click'\n};\n\n/**\n * Ignore Most of this class as it has not been thought through yet. It will\n * change completely.\n */\nclass AnalyticsEvent {\n\n  /**\n   * @param {!AnalyticsEventType} type The type of event.\n   */\n  constructor(type) {\n    this.type = type;\n  }\n}\n\n/** @private */\nclass InstrumentationService {\n  /**\n   * @param {!Window} window\n   */\n  constructor(window) {\n    /** @const {!Window} */\n    this.win_ = window;\n\n    /** @const {string} */\n    this.TAG_ = \"Analytics.Instrumentation\";\n\n    /** @const {!Viewer} */\n    this.viewer_ = viewerFor(window);\n\n    /** @private {boolean} */\n    this.clickHandlerRegistered_ = false;\n\n    /** @private {!Observable<Event>} */\n    this.clickObservable_ = new Observable();\n  }\n\n  /**\n   * @param {!AnalyticsEventType} eventType The type of event\n   * @param {!AnalyticsEventListenerDef} The callback to call when the event\n   *   occurs.\n   * @param {string=} opt_selector If specified, the given listener\n   *   should only be called if the event target matches this selector.\n   */\n  addListener(eventType, listener, opt_selector) {\n    if (eventType === AnalyticsEventType.VISIBLE) {\n      if (this.viewer_.isVisible()) {\n        listener(new AnalyticsEvent(AnalyticsEventType.VISIBLE));\n      } else {\n        this.viewer_.onVisibilityChanged(() => {\n          if (this.viewer_.isVisible()) {\n            listener(new AnalyticsEvent(AnalyticsEventType.VISIBLE));\n          }\n        });\n      }\n    } else if (eventType === AnalyticsEventType.CLICK) {\n      if (!opt_selector) {\n        log.warn(this.TAG_, 'Missing required selector on click trigger');\n      } else {\n        this.ensureClickListener_();\n        this.clickObservable_.add(\n            this.createSelectiveListener_(listener, opt_selector));\n      }\n    }\n  }\n\n  /**\n   * Ensure we have a click listener registered on the document.\n   */\n  ensureClickListener_() {\n    if (!this.clickHandlerRegistered_) {\n      this.clickHandlerRegistered_ = true;\n      this.win_.document.documentElement.addEventListener(\n          'click', this.onClick_.bind(this));\n    }\n  }\n\n  /**\n   * @param {!Event} e\n   */\n  onClick_(e) {\n    this.clickObservable_.fire(e);\n  }\n\n  /**\n   * @param {!Function} listener\n   * @param {string} selector\n   */\n  createSelectiveListener_(listener, selector) {\n    return e => {\n      if (selector === '*' || this.matchesSelector_(e.target, selector)) {\n        listener(new AnalyticsEvent(AnalyticsEventType.CLICK));\n      }\n    };\n  }\n\n  /**\n   * @param {!Element} el\n   * @param {string} selector\n   * @return {boolean} True if the given element matches the given selector.\n   */\n  matchesSelector_(el, selector) {\n    try {\n      const matcher = el.matches ||\n          el.webkitMatchesSelector ||\n          el.mozMatchesSelector ||\n          el.msMatchesSelector ||\n          el.oMatchesSelector;\n      if (matcher) {\n        return matcher.call(el, selector);\n      }\n      const matches = this.win_.document.querySelectorAll(selector);\n      let i = matches.length;\n      while (i-- > 0 && matches.item(i) != el) {};\n      return i > -1;\n    } catch (selectorError) {\n      log.error(this.TAG_, 'Bad query selector: ', selector, selectorError);\n    }\n    return false;\n  }\n}\n\n/**\n * @param {!Window} window\n * @return {!InstrumentationService}\n */\nexport function instrumentationServiceFor(window) {\n  return getService(window, 'amp-analytics-instrumentation', () => {\n    return new InstrumentationService(window);\n  });\n}\n\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assertHttpsUrl} from '../../../src/url';\nimport {log} from '../../../src/log';\nimport {loadPromise} from '../../../src/event-helper';\n\n/** @const {string} */\nconst TAG_ = 'AmpAnalytics.Transport';\n\n/**\n * @param {!Window} win\n * @param {string} request\n * @param {!Object<string, string>} transportOptions\n */\nexport function sendRequest(win, request, transportOptions) {\n  assertHttpsUrl(request);\n  if (transportOptions['beacon'] &&\n      Transport.sendRequestUsingBeacon(win, request)) {\n    return;\n  }\n  if (transportOptions['xhrpost'] &&\n      Transport.sendRequestUsingXhr(win, request)) {\n    return;\n  }\n  if (transportOptions['image']) {\n    Transport.sendRequestUsingImage(win, request);\n    return;\n  }\n  log.warn(TAG_, 'Failed to send request', request, transportOptions);\n}\n\n/**\n * @visibleForTesting\n */\nexport class Transport {\n\n  /**\n   * @param {!Window} unusedWin\n   * @param {string} request\n   */\n  static sendRequestUsingImage(unusedWin, request) {\n    const image = new Image();\n    image.src = request;\n    image.width = 1;\n    image.height = 1;\n    loadPromise(image).then(() => {\n      log.fine(TAG_, 'Sent image request', request);\n    }).catch(() => {\n      log.warn(TAG_, 'Failed to send image request', request);\n    });\n  }\n\n  /**\n   * @param {!Window} win\n   * @param {string} request\n   * @return {boolean} True if this browser supports navigator.sendBeacon.\n   */\n  static sendRequestUsingBeacon(win, request) {\n    if (!win.navigator.sendBeacon) {\n      return false;\n    }\n    win.navigator.sendBeacon(request, '');\n    log.fine(TAG_, 'Sent beacon request', request);\n    return true;\n  }\n\n  /**\n   * @param {!Window} win\n   * @param {string} request\n   * @return {boolean} True if this browser supports cross-domain XHR.\n   */\n  static sendRequestUsingXhr(win, request) {\n    if (!win.XMLHttpRequest) {\n      return false;\n    }\n    const xhr = new win.XMLHttpRequest();\n    if (!('withCredentials' in xhr)) {\n      return false; // Looks like XHR level 1 - CORS is not supported.\n    }\n    xhr.open('POST', request, true);\n    xhr.withCredentials = true;\n\n    // Prevent pre-flight HEAD request.\n    xhr.setRequestHeader('Content-Type', 'text/plain');\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readystate == 4) {\n        log.fine(TAG_, 'Sent XHR request', request);\n      }\n    };\n\n    xhr.send('');\n    return true;\n  }\n}\n\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @const {!JSONObject}\n */\nexport const ANALYTICS_CONFIG = {\n\n  // Default parent configuration applied to all amp-analytics tags.\n  'default': {\n    'transport': {'beacon': true, 'xhrpost': true, 'image': true},\n    'vars': {\n      'random': 'RANDOM',\n      'canonicalUrl': 'CANONICAL_URL',\n      'canonicalHost': 'CANONICAL_HOST',\n      'canonicalPath': 'CANONICAL_PATH',\n      'documentReferrer': 'DOCUMENT_REFERRER',\n      'title': 'TITLE',\n      'ampdocUrl': 'AMPDOC_URL',\n      'ampdocHost': 'AMPDOC_HOST',\n      'pageViewId': 'PAGE_VIEW_ID',\n      'clientId': 'CLIENT_ID',\n      'timestamp': 'TIMESTAMP',\n      'timezone': 'TIMEZONE',\n      'scrollTop': 'SCROLL_TOP',\n      'scrollLeft': 'SCROLL_LEFT',\n      'scrollWidth': 'SCROLL_WIDTH',\n      'scrollHeight': 'SCROLL_HEIGHT',\n      'screenWidth': 'SCREEN_WIDTH',\n      'screenHeight': 'SCREEN_HEIGHT'\n    }\n    // TODO(btownsend, #871): Add a generic hit format to make custom analytics\n    // easier.\n  },\n\n  'googleanalytics': {\n    'requests': {\n      'host': 'https://www.google-analytics.com',\n      'basePrefix': 'v=1&_v=a0&aip=true&_s=${hitCount}&dl=${canonicalUrl}&' +\n          'dt=${title}&sr=${screenWidth}x${screenHeight}&_utmht=${timestamp}&' +\n          'jid=&cid=${clientId(_ga)}&tid=${account}',\n      'baseSuffix': '&z=${random}',\n      'pageview': '${host}/r/collect?${basePrefix}&t=pageview&' +\n          '_r=1${baseSuffix}',\n      'event': '${host}/collect?${basePrefix}&t=event&' +\n          'ec=${eventCategory}&ea=${eventAction}&el=${eventLabel}&' +\n          'ev=${eventValue}${baseSuffix}',\n      'social': '${host}/collect?${basePrefix}&t=social&' +\n          'sa=${socialAction}&sn=${socialNetwork}&st=${socialActionTarget}' +\n          '${baseSuffix}'\n    },\n    'optout': '_gaUserPrefs.ioo'\n  }\n};\n\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n/**\n * Throws an error if the first argument isn't trueish.\n *\n * Supports argument substitution into the message via %s placeholders.\n *\n * Throws an error object that has two extra properties:\n * - associatedElement: This is the first element provided in the var args.\n *   It can be used for improved display of error messages.\n * - messageArray: The elements of the substituted message as non-stringified\n *   elements in an array. When e.g. passed to console.error this yields\n *   native displays of things like HTML elements.\n *\n * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n *     not evaluate to true.\n * @param {string} message The assertion message\n * @param {...*} var_args Arguments substituted into %s in the message.\n * @return {T} The value of shouldBeTrueish.\n * @template T\n */\n/*eslint \"google-camelcase/google-camelcase\": 0*/\nexport function assert(shouldBeTrueish, message, var_args) {\n  let firstElement;\n  if (!shouldBeTrueish) {\n    message = message || 'Assertion failed';\n    const splitMessage = message.split('%s');\n    const first = splitMessage.shift();\n    let formatted = first;\n    const messageArray = [];\n    pushIfNonEmpty(messageArray, first);\n    for (let i = 2; i < arguments.length; i++) {\n      const val = arguments[i];\n      if (val && val.tagName) {\n        firstElement = val;\n      }\n      const nextConstant = splitMessage.shift();\n      messageArray.push(val);\n      pushIfNonEmpty(messageArray, nextConstant.trim());\n      formatted += toString(val) + nextConstant;\n    }\n    const e = new Error(formatted);\n    e.fromAssert = true;\n    e.associatedElement = firstElement;\n    e.messageArray = messageArray;\n    throw e;\n  }\n  return shouldBeTrueish;\n}\n/*eslint \"google-camelcase/google-camelcase\": 2*/\n\n/**\n * @param {*} val\n * @return {string}\n */\nfunction toString(val) {\n  if (val instanceof Element) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return val;\n}\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Factory for ./service/cid-impl.js\n */\n\nimport {getElementService} from './service';\n\n/**\n * @param {!Window} window\n * @return {!Promise<!Cid>}\n */\nexport function cidFor(window) {\n  return getElementService(window, 'cid', 'amp-analytics');\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Returns the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * Returns the cookie's value or `null`.\n *\n * @param {!Window} win\n * @param {string} name\n * @return {?string}\n */\nexport function getCookie(win, name) {\n  const cookieString = win.document.cookie;\n  if (!cookieString) {\n    return null;\n  }\n  const cookies = cookieString.split(';');\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i].trim();\n    const eq = cookie.indexOf('=');\n    if (eq == -1) {\n      continue;\n    }\n    if (decodeURIComponent(cookie.substring(0, eq).trim()) == name) {\n      return decodeURIComponent(cookie.substring(eq + 1).trim());\n    }\n  }\n  return null;\n}\n\n/**\n * Sets the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n */\nexport function setCookie(win, name, value, expirationTime) {\n  win.document.cookie = encodeURIComponent(name) + '=' +\n      encodeURIComponent(value) +\n      '; path=/' +\n      '; expires=' + new Date(expirationTime).toUTCString();\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getService} from './service';\nimport {assert} from './asserts';\nimport {parseUrl} from './url';\n\n/**\n * @param {!Window} win\n * @return {{canonicalUrl: string, pageViewId: string}} Info about the doc\n *     - canonicalUrl: The doc's canonical.\n *     - pageViewId: Id for this page view. Low entropy but should be unique\n *       for concurrent page views of a user.\n */\nexport function documentInfoFor(win) {\n  return getService(win, 'documentInfo', () => {\n    return {\n      canonicalUrl: parseUrl(assert(\n          win.document.querySelector('link[rel=canonical]'),\n              'AMP files are required to have a <link rel=canonical> tag.')\n              .href).href,\n      pageViewId: getPageViewId(win),\n    };\n  });\n}\n\n/**\n * Returns a relatively low entropy random string.\n * This should be called once per window and then cached for subsequent\n * access to the same value to be persistent per page.\n * @param {!Window} win\n * @return {string}\n */\nfunction getPageViewId(win) {\n  return String(Math.floor(win.Math.random() * 10000));\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {timer} from './timer';\n\n\n/**\n * Listens for the specified event on the element and removes the listener\n * as soon as event has been received.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(Event)} listener\n * @param {boolean=} opt_capture\n * @return {!UnlistenDef}\n */\nexport function listenOnce(element, eventType, listener, opt_capture) {\n  const capture = opt_capture || false;\n  let unlisten;\n  const proxy = event => {\n    listener(event);\n    unlisten();\n  };\n  unlisten = () => {\n    element.removeEventListener(eventType, proxy, capture);\n  };\n  element.addEventListener(eventType, proxy, capture);\n  return unlisten;\n}\n\n\n/**\n * Returns  a promise that will resolve as soon as the specified event has\n * fired on the element. Optionally, opt_timeout can be specified that will\n * reject the promise if the event has not fired by then.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {boolean=} opt_capture\n * @param {number=} opt_timeout\n * @return {!Promise<!Event>}\n */\nexport function listenOncePromise(element, eventType, opt_capture,\n    opt_timeout) {\n  let unlisten;\n  const eventPromise = new Promise((resolve, unusedReject) => {\n    unlisten = listenOnce(element, eventType, resolve, opt_capture);\n  });\n  return racePromise_(eventPromise, unlisten, opt_timeout);\n}\n\n\n/**\n * Whether the specified element has been loaded already.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isLoaded(element) {\n  return element.complete || element.readyState == 'complete';\n}\n\n\n/**\n * Returns a promise that will resolve or fail based on the element's 'load'\n * and 'error' events. Optionally this method takes a timeout, which will reject\n * the promise if the resource has not loaded by then.\n * @param {!Element} element\n * @param {number=} opt_timeout\n * @return {!Promise<!Element>}\n */\nexport function loadPromise(element, opt_timeout) {\n  let unlistenLoad;\n  let unlistenError;\n  const loadingPromise = new Promise((resolve, reject) => {\n    if (isLoaded(element)) {\n      resolve(element);\n    } else {\n      // Listen once since IE 5/6/7 fire the onload event continuously for\n      // animated GIFs.\n      if (element.tagName === 'AUDIO' || element.tagName === 'VIDEO') {\n        unlistenLoad = listenOnce(element, 'loadstart', () => resolve(element));\n      } else {\n        unlistenLoad = listenOnce(element, 'load', () => resolve(element));\n      }\n      unlistenError = listenOnce(element, 'error', reject);\n    }\n  });\n  return racePromise_(loadingPromise, () => {\n    // It's critical that all listeners are removed.\n    if (unlistenLoad) {\n      unlistenLoad();\n    }\n    if (unlistenError) {\n      unlistenError();\n    }\n  }, opt_timeout);\n}\n\n\n/**\n * @param {!Promise<TYPE>} promise\n * @param {Unlisten|undefined} unlisten\n * @param {number|undefined} timeout\n * @return {!Promise<TYPE>}\n * @template TYPE\n */\nfunction racePromise_(promise, unlisten, timeout) {\n  let racePromise;\n  if (timeout === undefined) {\n    // Timeout is not specified: return promise.\n    racePromise = promise;\n  } else {\n    // Timeout has been specified: add a timeout condition.\n    racePromise = timer.timeoutPromise(timeout || 0, promise);\n  }\n  if (!unlisten) {\n    return racePromise;\n  }\n  return racePromise.then(result => {\n    unlisten();\n    return result;\n  }, reason => {\n    unlisten();\n    throw reason;\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Experiments system allows a developer to opt-in to test\n * features that are not yet fully tested.\n *\n * Experiments page: https://cdn.ampproject.org/experiments.html *\n */\n\nimport {getCookie, setCookie} from './cookies';\nimport {timer} from './timer';\n\n\n/** @const {string} */\nconst COOKIE_NAME = 'AMP_EXP';\n\n/** @const {number} */\nconst COOKIE_MAX_AGE_DAYS = 180;  // 6 month\n\n/** @const {time} */\nconst COOKIE_EXPIRATION_INTERVAL = COOKIE_MAX_AGE_DAYS * 24 * 60 * 60 * 1000;\n\n\n/**\n * Whether the specified experiment is on or off.\n * @param {!Window} win\n * @param {string} experimentId\n * @return {boolean}\n */\nexport function isExperimentOn(win, experimentId) {\n  return getExperimentIds(win).indexOf(experimentId) != -1;\n}\n\n\n/**\n * Toggles the expriment on or off. Returns the actual value of the expriment\n * after toggling is done.\n * @param {!Window} win\n * @param {string} experimentId\n * @param {boolean=} opt_on\n * @return {boolean}\n */\nexport function toggleExperiment(win, experimentId, opt_on) {\n  const experimentIds = getExperimentIds(win);\n  const currentlyOn = experimentIds.indexOf(experimentId) != -1;\n  const on = opt_on !== undefined ? opt_on : !currentlyOn;\n  if (on != currentlyOn) {\n    if (on) {\n      experimentIds.push(experimentId);\n    } else {\n      experimentIds.splice(experimentIds.indexOf(experimentId), 1);\n    }\n    saveExperimentIds(win, experimentIds);\n  }\n  return on;\n}\n\n\n/**\n * Returns a set of experiment IDs currently on.\n * @param {!Window} win\n * @return {!Array<string>}\n */\nfunction getExperimentIds(win) {\n  const experimentCookie = getCookie(win, COOKIE_NAME);\n  return experimentCookie ? experimentCookie.split(/\\s*,\\s*/g) : [];\n}\n\n\n/**\n * Saves a set of experiment IDs currently on.\n * @param {!Window} win\n * @param {!Array<string>} experimentIds\n */\nfunction saveExperimentIds(win, experimentIds) {\n  setCookie(win, COOKIE_NAME, experimentIds.join(','),\n      timer.now() + COOKIE_EXPIRATION_INTERVAL);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\n\n/** @const Time when this JS loaded.  */\nconst start = new Date().getTime();\n\n\n/**\n * Logging.\n * // TODO(@cramforce): Make this DCRable.\n * Add #log=1 to URL to turn on logging when in prod (providing a build with\n * logging is used and #log=0 to turn off logging in local dev.\n * @final\n */\nexport class Log {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /**\n     * In tests we use the main test window instead of the iframe where\n     * the tests runs because only the former is relayed to the console.\n     * @const {!Window}\n     */\n    this.win = win.AMP_TEST ? win.parent : win;\n\n    /** @private {boolean} */\n    this.isEnabled_ = this.shouldBeEnabled_();\n  }\n\n  shouldBeEnabled_() {\n    if (!this.win.console || !this.win.console.log) {\n      return false;\n    }\n    // Search for #log=0 or log=1\n    const match = this.win.location.hash.match(/log=(\\d)/);\n    const shouldLog = match && match[1];\n    if (getMode().localDev && shouldLog != '0') {\n      return true;\n    }\n    if (this.win.location.hash && shouldLog == '1') {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {string} tag\n   * @param {string} level\n   * @param {!Array} messages\n   * @param {?} opt_error\n   */\n  msg_(tag, level, messages) {\n    if (this.isEnabled_) {\n      let fn = this.win.console.log;\n      if (level == 'ERROR') {\n        fn = this.win.console.error || fn;\n      } else if (level == 'INFO') {\n        fn = this.win.console.info || fn;\n      } else if (level == 'WARN') {\n        fn = this.win.console.warn || fn;\n      }\n      messages.unshift(new Date().getTime() - start, '[' + tag + ']');\n      fn.apply(this.win.console, messages);\n    }\n  }\n\n  /**\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  fine(tag, var_args) {\n    if (this.isEnabled_) {\n      this.msg_(tag, 'FINE', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  info(tag, var_args) {\n    if (this.isEnabled_) {\n      this.msg_(tag, 'INFO', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  warn(tag, var_args) {\n    if (this.isEnabled_) {\n      this.msg_(tag, 'WARN', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * @param {string} tag\n   * @param {...*} var_args\n   * @param {?} opt_error\n   */\n  error(tag, var_args) {\n    if (this.isEnabled_) {\n      this.msg_(tag, 'ERROR', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n};\n\n\nexport const log = new Log(window);\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {parseQueryString} from './url';\n\n\n/**\n * @typedef {{\n *   localDev: boolean\n * }}\n */\nlet ModeDef;\n\n/** @typedef {?ModeDef} */\nlet mode = null;\n\n/**\n * Provides info about the current app.\n * @return {!ModeDef}\n */\nexport function getMode() {\n  if (mode) {\n    return mode;\n  }\n  return mode = getMode_();\n}\n\n/**\n * Set mode in a test. Pass null in afterEach function to reset.\n * @param {?ModeDef} m\n */\nexport function setModeForTesting(m) {\n  mode = m;\n}\n\n/**\n * Provides info about the current app.\n * @return {!ModeDef}\n */\nfunction getMode_() {\n  const isLocalDev = (location.hostname == 'localhost' ||\n      (location.ancestorOrigins && location.ancestorOrigins[0] &&\n          location.ancestorOrigins[0].indexOf('http://localhost:') == 0)) &&\n      // Filter out localhost running against a prod script.\n      // Because all allowed scripts are ours, we know that these can only\n      // occur during local dev.\n      !!document.querySelector('script[src*=\"/dist/\"],script[src*=\"/base/\"]');\n\n  const overrideDevelopment = parseQueryString(location.hash)['development'];\n  const development = overrideDevelopment != undefined\n      ? overrideDevelopment == '1'\n      : !!document.querySelector('script[development]');\n\n  return {\n    localDev: isLocalDev,\n    // Triggers validation\n    development: development,\n    minified: process.env.NODE_ENV == 'production',\n    test: window.AMP_TEST\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * This type signifies a callback that can be called to remove the listener.\n * @typedef {function()}\n */\nclass UnlistenDef {}\n\n\n/**\n * This class helps to manage observers. Observers can be added, removed or\n * fired through and instance of this class.\n * @template TYPE\n */\nexport class Observable {\n\n  constructor() {\n    /** @const {!Array<function(TYPE)>} */\n    this.handlers_ = [];\n  }\n\n  /**\n   * Adds the observer to this instance.\n   * @param {function(TYPE)} handler Observer's handler.\n   * @return {!UnlistenDef}\n   */\n  add(handler) {\n    this.handlers_.push(handler);\n    return () => {\n      this.remove(handler);\n    };\n  }\n\n  /**\n   * Removes the observer from this instance.\n   * @param {function(TYPE)} handler Observer's instance.\n   */\n  remove(handler) {\n    for (let i = 0; i < this.handlers_.length; i++) {\n      if (handler == this.handlers_[i]) {\n        this.handlers_.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  /**\n   * Fires an event. All observers are called.\n   * @param {TYPE} event\n   */\n  fire(event) {\n    this.handlers_.forEach(handler => {\n      handler(event);\n    });\n  }\n\n  /**\n   * Returns number of handlers. Mostly needed for tests.\n   * @return {number}\n   */\n  getHandlerCount() {\n    return this.handlers_.length;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './asserts';\n\n/**\n * Holds info about a service.\n * - obj: Actual service implementation when available.\n * - promise: Promise for the obj.\n * - resolve: Function to resolve the promise with the object.\n * @typedef {{\n *   obj: (?Object),\n *   promise: (?Promise|undefined),\n *   resolve: (?function(!Object)|undefined),\n * }}\n */\nlet ServiceHolderDef;\n\n/**\n * Returns a service for the given id and window (a per-window singleton).\n * If the service is not yet available the factory function is invoked and\n * expected to return the service.\n * Users should typically wrap this as a special purpose function (e.g.\n * viewportFor(win)) for type safety and because the factory should not be\n * passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {function(!Window):!Object=} opt_factory Should create the service\n *     if it does not exist yet. If the factory is not given, it is an error\n *     if the service does not exist yet.\n * @return {*}\n */\nexport function getService(win, id, opt_factory) {\n  const services = getServices(win);\n  let s = services[id];\n  if (!s) {\n    s = services[id] = {};\n  }\n  if (!s.obj) {\n    assert(opt_factory, 'Factory not given and service missing %s', id);\n    s.obj = opt_factory(win);\n    // The service may have been requested already, in which case we have a\n    // pending promise we need to fulfill.\n    if (s.resolve) {\n      s.resolve(s.obj);\n    }\n  }\n  return s.obj;\n}\n\n/**\n * Returns a promise for a service for the given id and window. Also expects\n * an element that has the actual implementation. The promise resolves when\n * the implementation loaded.\n * Users should typically wrap this as a special purpose function (e.g.\n * viewportFor(win)) for type safety and because the factory should not be\n * passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} provideByElement Name of the custom element that provides\n *     the implementation of this service.\n * @return {!Promise<*>}\n */\nexport function getElementService(win, id, providedByElement) {\n  // Call `getElementService_` in a micro-task to ensure that `stubElements`\n  // has been called.\n  return Promise.resolve().then(() => {\n    return getElementService_(win, id, providedByElement);\n  });\n}\n\n/**\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} provideByElement Name of the custom element that provides\n *     the implementation of this service.\n * @return {!Promise<*>}\n * @private\n */\nfunction getElementService_(win, id, providedByElement) {\n  assert(isElementScheduled(win, providedByElement),\n      'Service %s was requested to be provided through %s, ' +\n      'but %s is not loaded in the current page. To fix this ' +\n      'problem load the JavaScript file for %s in this page.',\n      id, providedByElement, providedByElement, providedByElement);\n  const services = getServices(win);\n  const s = services[id];\n  if (s) {\n    // If a service was registered with getService, we make a promise from it\n    // which we will return in future invocations.\n    if (!s.promise) {\n      s.promise = Promise.resolve(s.obj);\n    }\n    return s.promise;\n  }\n  // TODO(@cramforce): Add a check that if the element is eventually registered\n  // that the service is actually provided and this promise resolves.\n  let resolve;\n  const p = new Promise(r => {\n    resolve = r;\n  });\n  services[id] = {\n    obj: null,\n    promise: p,\n    resolve: resolve,\n  };\n\n  return p;\n}\n\n/**\n * @param {!Window} win\n * @param {string} elementName Name of an extended custom element.\n * @return {boolean} Whether this element is scheduled to be loaded.\n */\nfunction isElementScheduled(win, elementName) {\n  assert(win.ampExtendedElements, 'win.ampExtendedElements not created yet');\n  return !!win.ampExtendedElements[elementName];\n}\n\n/**\n * In order to provide better error messages we only allow to retrieve\n * services from other elements if those elements are loaded in the page.\n * This makes it possible to mark an element as loaded in a test.\n * @param {!Window} win\n * @param {string} elementName Name of an extended custom element.\n */\nexport function markElementScheduledForTesting(win, elementName) {\n  if (!win.ampExtendedElements) {\n    win.ampExtendedElements = {};\n  }\n  win.ampExtendedElements[elementName] = true;\n}\n\n/**\n * Returns the object that holds the services registered in a window.\n * @param {!Window} win\n * @return {!Object<string,!ServiceHolderDef>}\n */\nfunction getServices(win) {\n  let services = win.services;\n  if (!services) {\n    services = win.services = {};\n  }\n  return services;\n}\n\n/**\n * Resets a single service, so it gets recreated on next getService invocation.\n * @param {!Window} win\n * @param {string} id of the service.\n */\nexport function resetServiceForTesting(win, id) {\n  if (win.services) {\n    win.services[id] = null;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides per AMP document source origin and use case\n * persistent client identifiers for use in analytics and similar use\n * cases.\n *\n * For details, see https://goo.gl/Mwaacs\n */\n\nimport {assert} from '../asserts';\nimport {getCookie} from '../cookies';\nimport {getMode} from '../mode';\nimport {getService} from '../service';\nimport {parseUrl} from '../url';\nimport {timer} from '../timer';\nimport {viewerFor} from '../viewer';\nimport {sha384Base64} from\n    '../../third_party/closure-library/sha384-generated';\n\n\nconst ONE_DAY_MILLIS = 24 * 3600 * 1000;\n\n/**\n * We ignore base cids that are older than (roughly) one year.\n */\nconst BASE_CID_MAX_AGE_MILLIS = 365 * ONE_DAY_MILLIS;\n\n/**\n * A base cid string value and the time it was last read / stored.\n * @typedef {{time: number, cid: string}}\n */\nlet BaseCidInfoDef;\n\n\nclass Cid {\n  /** @param {!Window} win */\n  constructor(win) {\n    /** @const */\n    this.win = win;\n\n    /** @private @const Instance for testing. */\n    this.sha384Base64_ = sha384Base64;\n\n    /**\n     * Cached base cid once read from storage to avoid repeated\n     * reads.\n     * @private {?string}\n     */\n    this.baseCid_ = null;\n  }\n\n  /**\n   * @param {string} externalCidScope Name of the fallback cookie for the\n   *     case where this doc is not served by an AMP proxy.\n   * @param {!Promise} consent Promise for when the user has given consent\n   *     (if deemed necessary by the publisher) for use of the client\n   *     identifier.\n   * @param {!Promise=} opt_persistenceConsent Dedicated promise for when\n   *     it is OK to persist a new tracking identifier. This could be\n   *     supplied ONLY by the code that supplies the actual consent\n   *     cookie.\n   *     If this is given, the consent param should be a resolved promise\n   *     because this call should be only made in order to get consent.\n   *     The consent promise passed to other calls should then itself\n   *     depend on the opt_persistenceConsent promise (and the actual\n   *     consent, of course).\n   *  @return {!Promise<?string>} A client identifier that should be used\n   *      within the current source origin and externalCidScope. Might be\n   *      null if no identifier was found or could be made.\n   *      This promise may take a long time to resolve if consent isn't\n   *      given.\n   */\n  get(externalCidScope, consent, opt_persistenceConsent) {\n    assert(/^[a-zA-Z0-9-_]+$/.test(externalCidScope),\n        'The client id name must only use the characters ' +\n        '[a-zA-Z0-9-_]+\\nInstead found: %s', externalCidScope);\n    return consent.then(() => {\n      return getExternalCid(this, externalCidScope,\n          opt_persistenceConsent || consent);\n    });\n  }\n}\n\n/**\n * Returns the \"external cid\". This is a cid for a specific purpose\n * (Say Analytics provider X). It is unique per user, that purpose\n * and the AMP origin site.\n * @param {!Cid} cid\n * @param {string} externalCidScope\n * @param {!Promise} persistenceConsent\n * @return {!Promise<?string>}\n */\nfunction getExternalCid(cid, externalCidScope, persistenceConsent) {\n  const url = parseUrl(cid.win.location.href);\n  if (!isProxyOrigin(url)) {\n    return Promise.resolve(getCookie(cid.win, externalCidScope));\n  }\n  return getBaseCid(cid, persistenceConsent).then(baseCid => {\n    return cid.sha384Base64_(\n        baseCid +\n        getSourceOrigin(url) +\n        externalCidScope);\n  });\n}\n\n/**\n * Returns whether the URL has the origin of a proxy.\n * @param {!Url} url URL of an AMP document.\n * @return {boolean}\n * @visibleForTesting BUT if this is needed elsewhere it could be\n *     factored into its own package.\n */\nexport function isProxyOrigin(url) {\n  // List of well known proxy hosts. New proxies must be added here\n  // to generate correct tokens.\n  return (url.origin == 'https://cdn.ampproject.org' ||\n      url.origin.indexOf('http://localhost:') == 0);\n}\n\n/**\n * Returns the source origin of an AMP document for documents served\n * on a proxy origin. Throws an error if the doc is not on a proxy origin.\n * @param {!Url} url URL of an AMP document.\n * @return {string} The source origin of the URL.\n * @visibleForTesting BUT if this is needed elsewhere it could be\n *     factored into its own package.\n */\nexport function getSourceOrigin(url) {\n  assert(isProxyOrigin(url), 'Expected proxy origin %s', url.origin);\n  // Example path that is being matched here.\n  // https://cdn.ampproject.org/c/s/www.origin.com/foo/\n  // The /s/ is optional and signals a secure origin.\n  const path = url.pathname.split('/');\n  const prefix = path[1];\n  const mode = getMode();\n  // whitelist while localdev and file is in build/ or examples/\n  if (!(mode.localDev &&\n        (prefix == 'examples.build' || prefix == 'examples'))) {\n    assert(prefix == 'c' || prefix == 'v',\n        'Unknown path prefix in url %s', url.href);\n  }\n  const domainOrHttpsSignal = path[2];\n  const origin = domainOrHttpsSignal == 's'\n      ? 'https://' + path[3]\n      : 'http://' + domainOrHttpsSignal;\n  // Sanity test that what we found looks like a domain.\n  assert(origin.indexOf('.') > 0, 'Expected a . in origin %s', origin);\n  return origin;\n}\n\n/**\n * Returns the base cid for the current user. This string must not\n * be exposed to users without hashing with the current source origin\n * and the externalCidScope.\n * On a proxy this value is the same for a user across all source\n * origins.\n * @param {!Cid} cid\n * @param {!Promise} persistenceConsent\n * @return {!Promise<string>}\n */\nfunction getBaseCid(cid, persistenceConsent) {\n  if (cid.baseCid_) {\n    return Promise.resolve(cid.baseCid_);\n  }\n  const win = cid.win;\n  const stored = read(win);\n  // See if we have a stored base cid and whether it is still valid\n  // in terms of expiration.\n  if (stored && !isExpired(stored)) {\n    if (shouldUpdateStoredTime(stored)) {\n      // Once per interval we mark the cid as used.\n      store(win, stored.cid);\n    }\n    cid.baseCid_ = stored.cid;\n    return Promise.resolve(stored.cid);\n  }\n  // If we are being embedded, try to get the base cid from the viewer.\n  // Note, that we never try to persist to localStorage in this case.\n  const viewer = viewerFor(win);\n  if (viewer.isEmbedded()) {\n    return viewer.getBaseCid();\n  }\n\n  // We need to make a new one.\n  const seed = getEntropy(win);\n  const newVal = cid.sha384Base64_(seed);\n  // Storing the value may require consent. We wait for the respective\n  // promise.\n  persistenceConsent.then(() => {\n    // The initial CID generation is inherently racy. First one that gets\n    // consent wins.\n    const relookup = read(win);\n    if (!relookup) {\n      store(win, newVal);\n    }\n  });\n  return Promise.resolve(newVal);\n}\n\n/**\n * Stores a new cidString in localStorage. Adds the current time to the\n * stored value.\n * @param {!Window} win\n * @param {string} cidString Actual cid string to store.\n */\nfunction store(win, cidString) {\n  const item = {};\n  item['time'] = timer.now();\n  item['cid'] = cidString;\n  const data = JSON.stringify(item);\n  try {\n    win.localStorage.setItem('amp-cid', data);\n  } catch (ignore) {\n    // Setting localStorage may fail. In practice we don't expect that to\n    // happen a lot (since we don't go anywhere near the quote, but\n    // in particular in Safari private browsing mode it always fails.\n    // In that case we just don't store anything, which is just fine.\n  }\n}\n\n/**\n * Retrieves a stored cid item from localStorage. Returns undefined if\n * none was found\n * @param {!Window} win\n * @return {!BaseCidInfoDef|undefined}\n */\nfunction read(win) {\n  let val;\n  try {\n    val = win.localStorage.getItem('amp-cid');\n  } catch (ignore) {\n    // If reading from localStorage fails, we assume it is empty.\n  }\n  if (!val) {\n    return undefined;\n  }\n  const item = JSON.parse(val);\n  return {\n    time: item['time'],\n    cid: item['cid'],\n  };\n}\n\n/**\n * Whether the retrieved cid object is expired and should be ignored.\n * @param {!BaseCidInfoDef} storedCidInfo\n * @return {boolean}\n */\nfunction isExpired(storedCidInfo) {\n  const createdTime = storedCidInfo.time;\n  const now = timer.now();\n  return createdTime + BASE_CID_MAX_AGE_MILLIS < now;\n}\n\n/**\n * Whether we should write a new timestamp to the stored cid value.\n * We say yes if it is older than 1 day, so we only do this max once\n * per day to avoid writing to localStorage all the time.\n * @param {!BaseCidInfoDef} storedCidInfo\n * @return {boolean}\n */\nfunction shouldUpdateStoredTime(storedCidInfo) {\n  const createdTime = storedCidInfo.time;\n  const now = timer.now();\n  return createdTime + ONE_DAY_MILLIS < now;\n}\n\n/**\n * Returns an array with a total of 128 of random values based on the\n * `win.crypto.getRandomValues` API. If that is not available concatenates\n * a string of other values that might be hard to guess including\n * `Math.random` and the current time.\n * @param {!Window} win\n * @return {!Array<number>|string} Entropy.\n */\nfunction getEntropy(win) {\n  // Widely available in browsers we support:\n  // http://caniuse.com/#search=getRandomValues\n  if (win.crypto && win.crypto.getRandomValues) {\n    const uint8array = new Uint8Array(16);  // 128 bit\n    win.crypto.getRandomValues(uint8array);\n    // While closure's Hash interface would except a Uint8Array\n    // sha384 does not in practice, so we copy the values into\n    // a plain old array.\n    const array = new Array(16);\n    for (let i = 0; i < uint8array.length; i++) {\n      array[i] = uint8array[i];\n    }\n    return array;\n  }\n  // Support for legacy browsers.\n  return String(win.location.href + timer.now() +\n      win.Math.random() + win.screen.width + win.screen.height);\n}\n\n/**\n * @param {!Window} window\n * @return {!Cid}\n */\nexport function installCidService(window) {\n  return getService(window, 'cid', () => {\n    return new Cid(window);\n  });\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes removed and character after to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, function(_all, character) {\n    return character.toUpperCase();\n  });\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {!function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=1} optMaxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, opt_maxIterations) {\n  const maxIterations = opt_maxIterations || 1;\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Helper with all things Timer.\n */\nexport class Timer {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {!Window} */\n    this.win = win;\n\n    /** @private @const {!Promise}  */\n    this.resolved_ = Promise.resolve();\n\n    this.taskCount_ = 0;\n\n    this.canceled_ = {};\n\n    /** @const {number} */\n    this.startTime_ = this.now();\n  }\n\n  /**\n   * Returns the current EPOC time in milliseconds.\n   * @return {number}\n   */\n  now() {\n    // TODO(dvoytenko): when can we use Date.now?\n    return Number(new Date());\n  }\n\n /**\n  * Returns time since start in milliseconds.\n  * @return {number}\n  */\n  timeSinceStart() {\n    return this.now() - this.startTime_;\n  }\n\n  /**\n   * Runs the provided callback after the specified delay. This uses a micro\n   * task for 0 or no specified time. This means that the delay will actually\n   * be close to 0 and this will NOT yield to the event queue.\n   *\n   * Returns the timer ID that can be used to cancel the timer (cancel method).\n   * @param {!function()} callback\n   * @param {number=} opt_delay\n   * @return {number|string}\n   */\n  delay(callback, opt_delay) {\n    if (!opt_delay) {\n      // For a delay of zero,  schedule a promise based micro task since\n      // they are predictably fast.\n      const id = 'p' + this.taskCount_++;\n      this.resolved_.then(() => {\n        if (this.canceled_[id]) {\n          delete this.canceled_[id];\n          return;\n        }\n        callback();\n      });\n      return id;\n    }\n    return this.win.setTimeout(callback, opt_delay);\n  }\n\n  /**\n   * Cancels the previously scheduled callback.\n   * @param {number|string} timeoutId\n   */\n  cancel(timeoutId) {\n    if (typeof timeoutId == 'string') {\n      this.canceled_[timeoutId] = true;\n      return;\n    }\n    this.win.clearTimeout(timeoutId);\n  }\n\n  /**\n   * Returns a promise that will resolve after the delay. Optionally, the\n   * resolved value can be provided as opt_result argument.\n   * @param {number=} opt_delay\n   * @param {RESULT=} opt_result\n   * @return {!Promise<RESULT>}\n   * @template RESULT\n   */\n  promise(opt_delay, opt_result) {\n    let timerKey = null;\n    return new Promise((resolve, reject) => {\n      timerKey = this.delay(() => {\n        timerKey = -1;\n        resolve(opt_result);\n      }, opt_delay);\n      if (timerKey == -1) {\n        reject(new Error('Failed to schedule timer.'));\n      }\n    }).catch(error => {\n      // Clear the timer. The most likely reason is \"cancel\" signal.\n      if (timerKey != -1) {\n        this.cancel(timerKey);\n      }\n      return Promise.reject(error);\n    });\n  }\n\n  /**\n   * Returns a promise that will fail after the specified delay. Optionally,\n   * this method can take opt_racePromise parameter. In this case, the\n   * resulting promise will either fail when the specified delay expires or\n   * will resolve based on the opt_racePromise, whichever happens first.\n   * @param {number} delay\n   * @param {!Promise<RESULT>|undefined} opt_racePromise\n   * @return {!Promise<RESULT>}\n   * @template RESULT\n   */\n  timeoutPromise(delay, opt_racePromise) {\n    let timerKey = null;\n    const delayPromise = new Promise((_resolve, reject) => {\n      timerKey = this.delay(() => {\n        timerKey = -1;\n        reject('timeout');\n      }, delay);\n      if (timerKey == -1) {\n        reject(new Error('Failed to schedule timer.'));\n      }\n    }).catch(error => {\n      // Clear the timer. The most likely reason is \"cancel\" signal.\n      if (timerKey != -1) {\n        this.cancel(timerKey);\n      }\n      return Promise.reject(error);\n    });\n    if (!opt_racePromise) {\n      return delayPromise;\n    }\n    // Avoids Promise->race due to presubmit check against it.\n    return new Promise((resolve, reject) => {\n      delayPromise.then(resolve, reject);\n      opt_racePromise.then(resolve, reject);\n    });\n  }\n}\n\n\nexport const timer = new Timer(window);\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {cidFor} from './cid';\nimport {documentInfoFor} from './document-info';\nimport {getService} from './service';\nimport {userNotificationManagerFor} from './user-notification';\nimport {log} from './log';\nimport {parseUrl, removeFragment} from './url';\nimport {viewportFor} from './viewport';\nimport {vsyncFor} from './vsync';\n\n/** @private {string} */\nconst TAG_ = 'UrlReplacements';\n\n/**\n * This class replaces substitution variables with their values.\n */\nclass UrlReplacements {\n  /** @param {!Window} win */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private {!RegExp|undefined} */\n    this.replacementExpr_;\n\n    /** @private @const {!Object<string, function(*):*>} */\n    this.replacements_ = this.win_.Object.create(null);\n\n    // Returns a random value for cache busters.\n    this.set_('RANDOM', () => {\n      return Math.random();\n    });\n\n    // Returns the canonical URL for this AMP document.\n    this.set_('CANONICAL_URL', () => {\n      return documentInfoFor(this.win_).canonicalUrl;\n    });\n\n    // Returns the host of the canonical URL for this AMP document.\n    this.set_('CANONICAL_HOST', () => {\n      const url = parseUrl(documentInfoFor(this.win_).canonicalUrl);\n      return url && url.hostname;\n    });\n\n    // Returns the path of the canonical URL for this AMP document.\n    this.set_('CANONICAL_PATH', () => {\n      const url = parseUrl(documentInfoFor(this.win_).canonicalUrl);\n      return url && url.pathname;\n    });\n\n    // Returns the referrer URL.\n    this.set_('DOCUMENT_REFERRER', () => {\n      return this.win_.document.referrer;\n    });\n\n    // Returns the title of this AMP document.\n    this.set_('TITLE', () => {\n      return this.win_.document.title;\n    });\n\n    // Returns the URL for this AMP document.\n    this.set_('AMPDOC_URL', () => {\n      return removeFragment(this.win_.location.href);\n    });\n\n    // Returns the host of the URL for this AMP document.\n    this.set_('AMPDOC_HOST', () => {\n      const url = parseUrl(this.win_.location.href);\n      return url && url.hostname;\n    });\n\n    // Returns a random string that will be the constant for the duration of\n    // single page view. It should have sufficient entropy to be unique for\n    // all the page views a single user is making at a time.\n    this.set_('PAGE_VIEW_ID', () => {\n      return documentInfoFor(this.win_).pageViewId;\n    });\n\n    this.set_('CLIENT_ID', (opt_name, opt_userNotificationId) => {\n      let consent = Promise.resolve();\n\n      // If no `opt_userNotificationId` argument is provided then\n      // assume consent is given by default.\n      if (opt_userNotificationId) {\n        consent = userNotificationManagerFor(this.win_).then(service => {\n          return service.get(opt_userNotificationId);\n        });\n      }\n\n      return cidFor(this.win_).then(cid => {\n        return cid.get(opt_name, consent);\n      });\n    });\n\n    // Returns the number of milliseconds since 1 Jan 1970 00:00:00 UTC.\n    this.set_('TIMESTAMP', () => {\n      return new Date().getTime();\n    });\n\n    // Returns the user's time-zone offset from UTC, in minutes.\n    this.set_('TIMEZONE', () => {\n      return new Date().getTimezoneOffset();\n    });\n\n    // Returns a promise resolving to viewport.getScrollTop.\n    this.set_('SCROLL_TOP', () => {\n      return vsyncFor(this.win_).measurePromise(\n        () => viewportFor(this.win_).getScrollTop());\n    });\n\n    // Returns a promise resolving to viewport.getScrollLeft.\n    this.set_('SCROLL_LEFT', () => {\n      return vsyncFor(this.win_).measurePromise(\n        () => viewportFor(this.win_).getScrollLeft());\n    });\n\n    // Returns a promise resolving to viewport.getScrollHeight.\n    this.set_('SCROLL_HEIGHT', () => {\n      return vsyncFor(this.win_).measurePromise(\n        () => viewportFor(this.win_).getScrollHeight());\n    });\n\n    // Returns screen.width.\n    this.set_('SCREEN_WIDTH', () => {\n      return this.win_.screen.width;\n    });\n\n    // Returns screen.height.\n    this.set_('SCREEN_HEIGHT', () => {\n      return this.win_.screen.height;\n    });\n  }\n\n  /**\n   * Sets the value resolver for the variable with the specified name. The\n   * value resolver may optionally take an extra parameter.\n   * @param {string} varName\n   * @param {function(*):*} resolver\n   * @return {!UrlReplacements}\n   * @private\n   */\n  set_(varName, resolver) {\n    this.replacements_[varName] = resolver;\n    this.replacementExpr_ = undefined;\n    return this;\n  }\n\n  /**\n   * Expands the provided URL by replacing all known variables with their\n   * resolved values. Optional `opt_bindings` can be used to add new variables\n   * or override existing ones.\n   * @param {string} url\n   * @param {!Object<string, *>=} opt_bindings\n   * @return {!Promise<string>}\n   */\n  expand(url, opt_bindings) {\n    const expr = this.getExpr_(opt_bindings);\n    let replacementPromise;\n    const encodeValue = val => {\n      // Value 0 is specialcased because the numeric 0 is a valid substitution\n      // value.\n      if (!val && val !== 0) {\n        val = '';\n      }\n      return encodeURIComponent(val);\n    };\n    url = url.replace(expr, (match, name, opt_strargs) => {\n      let args = [];\n      if (typeof opt_strargs == 'string') {\n        args = opt_strargs.split(',');\n      }\n      const val =\n          (args.length == 0 && opt_bindings && (name in opt_bindings)) ?\n          opt_bindings[name] :\n          this.replacements_[name].apply(this.replacements_, args);\n      // In case the produced value is a promise, we don't actually\n      // replace anything here, but do it again when the promise resolves.\n      if (val && val.then) {\n        const p = val.then(v => {\n          url = url.replace(match, encodeValue(v));\n        }, err => {\n          log.error(TAG_, 'Failed to expand: ' + name, err);\n        });\n        if (replacementPromise) {\n          replacementPromise = replacementPromise.then(() => p);\n        } else {\n          replacementPromise = p;\n        }\n        return match;\n      }\n      return encodeValue(val);\n    });\n\n    if (replacementPromise) {\n      replacementPromise = replacementPromise.then(() => url);\n    }\n\n    return replacementPromise || Promise.resolve(url);\n  }\n\n  /**\n   * @param {!Object<string, *>=} opt_bindings\n   * @return {!RegExp}\n   * @private\n   */\n  getExpr_(opt_bindings) {\n    const additionalKeys = opt_bindings ? Object.keys(opt_bindings) : null;\n    if (additionalKeys && additionalKeys.length > 0) {\n      const allKeys = Object.keys(this.replacements_);\n      additionalKeys.forEach(key => {\n        if (allKeys[key] === undefined) {\n          allKeys.push(key);\n        }\n      });\n      return this.buildExpr_(allKeys);\n    }\n    if (!this.replacementExpr_) {\n      this.replacementExpr_ = this.buildExpr_(Object.keys(this.replacements_));\n    }\n    return this.replacementExpr_;\n  }\n\n  /**\n   * @param {!Array<string>} keys\n   * @return {!RegExp}\n   * @private\n   */\n  buildExpr_(keys) {\n    const all = keys.join('|');\n    // Match the given replacement patterns, as well as optionally\n    // arguments to the replacement behind it in parantheses.\n    // Example string that match\n    // FOO_BAR\n    // FOO_BAR(arg1)\n    // FOO_BAR(arg1,arg2)\n    return new RegExp('\\\\$?(' + all + ')(?:\\\\(([0-9a-zA-Z-_,]+)\\\\))?', 'g');\n  }\n}\n\n/**\n * @param {!Window} window\n * @return {!UrlReplacements}\n */\nexport function urlReplacementsFor(window) {\n  return getService(window, 'url-replace', () => {\n    return new UrlReplacements(window);\n  });\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './asserts';\n\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * @param {string} url\n * @return {!Location}\n */\nexport function parseUrl(url) {\n  const a = document.createElement('a');\n  a.href = url;\n  const info = {\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash\n  };\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  info.origin = (a.origin && a.origin != 'null') ? a.origin : getOrigin(info);\n  assert(info.origin, 'Origin must exist');\n  return info;\n}\n\n\n/**\n * Asserts that a given url is HTTPS or protocol relative.\n * Provides an exception for localhost.\n * @param {string} urlString\n * @param {!Element} elementContext Element where the url was found.\n * @return {string}\n */\nexport function assertHttpsUrl(urlString, elementContext) {\n  const url = parseUrl(urlString);\n  assert(\n      url.protocol == 'https:' || /^(\\/\\/)/.test(urlString) ||\n      url.hostname == 'localhost' ||\n          url.hostname.lastIndexOf('.localhost') ==\n          // Poor person's endsWith\n          url.hostname.length - '.localhost'.length,\n      '%s source must start with ' +\n      '\"https://\" or \"//\" or be relative and served from ' +\n      'either https or from localhost. Invalid value: %s',\n      elementContext, urlString);\n  return urlString;\n}\n\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n * @param {string} queryString\n * @return {!Object<string, string>}\n */\nexport function parseQueryString(queryString) {\n  const params = Object.create(null);\n  if (!queryString) {\n    return params;\n  }\n  if (queryString.indexOf('?') == 0 || queryString.indexOf('#') == 0) {\n    queryString = queryString.substr(1);\n  }\n  const pairs = queryString.split('&');\n  for (let i = 0; i < pairs.length; i++) {\n    const pair = pairs[i];\n    const eqIndex = pair.indexOf('=');\n    let name;\n    let value;\n    if (eqIndex != -1) {\n      name = decodeURIComponent(pair.substring(0, eqIndex)).trim();\n      value = decodeURIComponent(pair.substring(eqIndex + 1)).trim();\n    } else {\n      name = decodeURIComponent(pair).trim();\n      value = '';\n    }\n    if (name) {\n      params[name] = value;\n    }\n  }\n  return params;\n}\n\n\n/**\n * Don't use this directly, only exported for testing. The value\n * is available via the origin property of the object returned by\n * parseUrl.\n * @param {!Location} info\n * @return {string}\n * @visibleForTesting\n */\nexport function getOrigin(info) {\n  if (info.protocol == 'data:' || !info.host) {\n    return info.href;\n  }\n  return info.protocol + '//' + info.host;\n}\n\n\n/**\n * Returns the URL without fragment. If URL doesn't contain fragment, the same\n * string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function removeFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return url;\n  }\n  return url.substring(0, index);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Factory for amp-user-notification\n */\n\nimport {getElementService} from './service';\n\n\n/**\n * @param {!Window} window\n * @return {!Promise<!UserNotification>}\n */\nexport function userNotificationManagerFor(window) {\n  return getElementService(window, 'userNotificationManager',\n      'amp-user-notification');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getService} from './service';\n\n\n/**\n * @param {!Window} window\n * @return {!Viewer}\n */\nexport function viewerFor(window) {\n  return getService(window, 'viewer');\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getService} from './service';\n\n/**\n * @param {!Window} window\n * @return {!Viewport}\n */\nexport function viewportFor(window) {\n  return getService(window, 'viewport');\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getService} from './service';\n\n\n/**\n * @param {!Window} window\n * @return {!Vsync}\n */\nexport function vsyncFor(window) {\n  return getService(window, 'vsync');\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assert} from './asserts';\nimport {getService} from './service';\n\n\n/**\n * The \"init\" argument of the Fetch API. Currently, only \"credentials: include\"\n * is implemented.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n *\n * @typedef {{\n *   body: (!Object|!Array|undefined),\n *   credentials: (string|undefined),\n *   headers: (!Object|undefined),\n *   method: (string|undefined)\n * }}\n */\nlet FetchInitDef;\n\n/** @private @const {!Array<string>} */\nconst allowedMethods_ = ['GET', 'POST'];\n\n/** @private @const {!Array<string>} */\nconst allowedBodyTypes_ = ['[object Object]', '[object Array]'];\n\n\n/**\n * A service that polyfills Fetch API for use within AMP.\n */\nclass Xhr {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /**\n     * We want to call `fetch_` unbound from any context since it could\n     * be either the native fetch or our polyfill.\n     * @private @const {function(string, ?FetchInitDef=):!Promise<!FetchResponse>}\n     */\n    this.fetch_ = (win.fetch || fetchPolyfill).bind(null);\n  }\n\n  /**\n   * Fetches and constructs JSON object based on the fetch polyfill.\n   *\n   * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n   *\n   * @param {string} input\n   * @param {?FetchInitDef=} opt_init\n   * @return {!Promise<!JSONValue>}\n   */\n  fetchJson(input, opt_init) {\n    const init = opt_init || {};\n    init.method = normalizeMethod_(init.method);\n    setupJson_(init);\n\n    return this.fetch_(input, init).then(response => {\n      return assertSuccess(response).json();\n    });\n  }\n\n  /**\n   * Sends the request, awaits result and confirms that it was successful.\n   *\n   * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n   *\n   * @param {string} input\n   * @param {?FetchInitDef=} opt_init\n   * @return {!Promise}\n   */\n  sendSignal(input, opt_init) {\n    return this.fetch_(input, opt_init).then(response => {\n      assertSuccess(response);\n    });\n  }\n}\n\n\n/**\n * Normalized method name by uppercasing.\n * @param {string|undefined} method\n * @return {string}\n * @private\n */\nexport function normalizeMethod_(method) {\n  if (method === undefined) {\n    return 'GET';\n  }\n  return method.toUpperCase();\n}\n\n/**\n* Initialize init object with headers and stringifies the body.\n * @param {!FetchInitDef} init\n * @private\n */\nfunction setupJson_(init) {\n  assert(allowedMethods_.indexOf(init.method) != -1, 'Only one of ' +\n      allowedMethods_.join(', ') + ' is currently allowed. Got %s',\n      init.method);\n\n  init.headers = {\n    'Accept': 'application/json'\n  };\n\n  if (init.method == 'POST') {\n    const bodyType = Object.prototype.toString.call(init.body);\n\n    // Assume JSON strict mode where only objects or arrays are allowed\n    // as body.\n    assert(allowedBodyTypes_.indexOf(bodyType) > -1,\n        'body must be of type object or array. %s',\n        init.body);\n\n    init.headers['Content-Type'] = 'application/json;charset=utf-8';\n    init.body = JSON.stringify(init.body);\n  }\n}\n\n\n/**\n * A minimal polyfill of Fetch API. It only polyfills what we currently use.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n *\n * Notice that the \"fetch\" method itself is not exported as that would require\n * us to immediately support a much wide API.\n *\n * @param {string} input\n * @param {!FetchInitDef=} opt_init\n * @return {!Promise<!FetchResponse>}\n * @private Visible for testing\n */\nexport function fetchPolyfill(input, opt_init) {\n  assert(typeof input == 'string', 'Only URL supported: %s', input);\n  const init = opt_init || {};\n  assert(!init.credentials || init.credentials == 'include',\n      'Only credentials=include support: %s', init.credentials);\n\n  return new Promise(function(resolve, reject) {\n    const xhr = createXhrRequest(init.method || 'GET', input, init);\n\n    if (init.credentials == 'include') {\n      xhr.withCredentials = true;\n    }\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState < /* STATUS_RECEIVED */ 2) {\n        return;\n      }\n      if (xhr.status < 100 || xhr.status > 599) {\n        xhr.onreadystatechange = null;\n        reject(new Error(`Unknown HTTP status ${xhr.status}`));\n        return;\n      }\n\n      // TODO(dvoytenko): This is currently simplified: we will wait for the\n      // whole document loading to complete. This is fine for the use cases\n      // we have now, but may need to be reimplemented later.\n      if (xhr.readyState == /* COMPLETE */ 4) {\n        resolve(new FetchResponse(xhr));\n      }\n    };\n    xhr.onerror = () => {\n      reject(new Error('Network failure'));\n    };\n    xhr.onabort = () => {\n      reject(new Error('Request aborted'));\n    };\n\n    if (init.method == 'POST') {\n      xhr.send(init.body);\n    } else {\n      xhr.send();\n    }\n  });\n}\n\n\n/**\n * @param {string} method\n * @param {string} url\n * @param {!FetchInitDef} init\n * @return {!XMLHttpRequest}\n * @private\n */\nfunction createXhrRequest(method, url, init) {\n  let xhr = new XMLHttpRequest();\n  if ('withCredentials' in xhr) {\n    xhr.open(method, url, true);\n  } else if (typeof XDomainRequest != 'undefined') {\n    // IE-specific object.\n    xhr = new XDomainRequest();\n    xhr.open(method, url);\n  } else {\n    throw new Error('CORS is not supported');\n  }\n\n  if (init.headers) {\n    Object.keys(init.headers).forEach(function(header) {\n      xhr.setRequestHeader(header, init.headers[header]);\n    });\n  }\n  return xhr;\n}\n\n\n/**\n * Returns the response if successful or otherwise throws an error.\n * @paran {!FetchResponse} response\n * @return {!FetchResponse}\n */\nfunction assertSuccess(response) {\n  if (response.status < 200 || response.status > 299) {\n    throw new Error(`HTTP error ${response.status}`);\n  }\n  return response;\n}\n\n\n/**\n * Response object in the Fetch API.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n */\nclass FetchResponse {\n  /**\n   * @param {!XMLHttpRequest} xhr\n   */\n  constructor(xhr) {\n    /** @private @const {!XMLHttpRequest} */\n    this.xhr_ = xhr;\n\n    /** @type {number} */\n    this.status = this.xhr_.status;\n\n    /** @type {boolean} */\n    this.bodyUsed = false;\n  }\n\n  /**\n   * Drains the response and returns the text.\n   * @return {!Promise<string>}\n   * @private\n   */\n  drainText_() {\n    assert(!this.bodyUsed, 'Body already used');\n    this.bodyUsed = true;\n    return Promise.resolve(this.xhr_.responseText);\n  }\n\n  /**\n   * Drains the response and returns the JSON object.\n   * @return {!Promise<!JSONValue>}\n   */\n  json() {\n    return this.drainText_().then(JSON.parse);\n  }\n}\n\n\n/**\n * @param {!Window} window\n * @return {!Xhr}\n */\nexport function xhrFor(window) {\n  return getService(window, 'xhr', () => {\n    return new Xhr(window);\n  });\n};\n","/* Generated from closure library commit f9232862c8905995ed7ee8949a405cd77d8e16e2 */var m=this;\nfunction aa(a){var b=typeof a;if(\"object\"==b)if(a){if(a instanceof Array)return\"array\";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(\"[object Window]\"==c)return\"object\";if(\"[object Array]\"==c||\"number\"==typeof a.length&&\"undefined\"!=typeof a.splice&&\"undefined\"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable(\"splice\"))return\"array\";if(\"[object Function]\"==c||\"undefined\"!=typeof a.call&&\"undefined\"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable(\"call\"))return\"function\"}else return\"null\";else if(\"function\"==\nb&&\"undefined\"==typeof a.call)return\"object\";return b}function q(a,b){function c(){}c.prototype=b.prototype;a.v=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.u=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};function ba(){this.g=-1};function r(a,b){this.b=a|0;this.a=b|0}var ca={},t={};function u(a){if(-128<=a&&128>a){var b=ca[a];if(b)return b}b=new r(a|0,0>a?-1:0);-128<=a&&128>a&&(ca[a]=b);return b}function w(a){isNaN(a)||!isFinite(a)?a=y():a<=-da?a=z():a+1>=da?(t[A]||(t[A]=new r(-1,2147483647)),a=t[A]):a=0>a?B(w(-a)):new r(a%C|0,a/C|0);return a}var C=4294967296,da=C*C/2;function y(){t[D]||(t[D]=u(0));return t[D]}function E(){t[F]||(t[F]=u(1));return t[F]}function ea(){t[G]||(t[G]=u(-1));return t[G]}\nfunction z(){t[H]||(t[H]=new r(0,-2147483648));return t[H]}r.prototype.toString=function(a){a=a||10;if(2>a||36<a)throw Error(\"radix out of range: \"+a);if(I(this))return\"0\";if(0>this.a){if(J(this,z())){var b=w(a),c=K(this,b),b=L(M(c,b),this);return c.toString(a)+b.b.toString(a)}return\"-\"+B(this).toString(a)}for(var c=w(Math.pow(a,6)),b=this,d=\"\";;){var e=K(b,c),f=(L(b,M(e,c)).b>>>0).toString(a),b=e;if(I(b))return f+d;for(;6>f.length;)f=\"0\"+f;d=\"\"+f+d}};function N(a){return 0<=a.b?a.b:C+a.b}\nfunction I(a){return 0==a.a&&0==a.b}function J(a,b){return a.a==b.a&&a.b==b.b}function fa(a){t[O]||(t[O]=u(16777216));return 0>P(a,t[O])}function P(a,b){if(J(a,b))return 0;var c=0>a.a,d=0>b.a;return c&&!d?-1:!c&&d?1:0>L(a,b).a?-1:1}function B(a){return J(a,z())?z():Q(new r(~a.b,~a.a),E())}\nfunction Q(a,b){var c=a.a>>>16,d=a.a&65535,e=a.b>>>16,f=b.a>>>16,g=b.a&65535,h=b.b>>>16,n,p;p=0+((a.b&65535)+(b.b&65535));n=0+(p>>>16);n+=e+h;e=0+(n>>>16);e+=d+g;d=0+(e>>>16);d=d+(c+f)&65535;return new r((n&65535)<<16|p&65535,d<<16|e&65535)}function L(a,b){return Q(a,B(b))}\nfunction M(a,b){if(I(a)||I(b))return y();if(J(a,z()))return 1==(b.b&1)?z():y();if(J(b,z()))return 1==(a.b&1)?z():y();if(0>a.a)return 0>b.a?M(B(a),B(b)):B(M(B(a),b));if(0>b.a)return B(M(a,B(b)));if(fa(a)&&fa(b))return w((a.a*C+N(a))*(b.a*C+N(b)));var c=a.a>>>16,d=a.a&65535,e=a.b>>>16,f=a.b&65535,g=b.a>>>16,h=b.a&65535,n=b.b>>>16,p=b.b&65535,v,l,k,x;x=0+f*p;k=0+(x>>>16);k+=e*p;l=0+(k>>>16);k=(k&65535)+f*n;l+=k>>>16;k&=65535;l+=d*p;v=0+(l>>>16);l=(l&65535)+e*n;v+=l>>>16;l&=65535;l+=f*h;v+=l>>>16;l&=\n65535;v=v+(c*p+d*n+e*h+f*g)&65535;return new r(k<<16|x&65535,v<<16|l)}\nfunction K(a,b){if(I(b))throw Error(\"division by zero\");if(I(a))return y();if(J(a,z())){if(J(b,E())||J(b,ea()))return z();if(J(b,z()))return E();var c;c=1;if(0==c)c=a;else{var d=a.a;c=32>c?new r(a.b>>>c|d<<32-c,d>>c):new r(d>>c-32,0<=d?0:-1)}c=K(c,b);d=1;if(0!=d){var e=c.b;c=32>d?new r(e<<d,c.a<<d|e>>>32-d):new r(0,e<<d-32)}if(J(c,y()))return 0>b.a?E():ea();d=L(a,M(b,c));return Q(c,K(d,b))}if(J(b,z()))return y();if(0>a.a)return 0>b.a?K(B(a),B(b)):B(K(B(a),b));if(0>b.a)return B(K(a,B(b)));e=y();for(d=\na;0<=P(d,b);){c=Math.max(1,Math.floor((d.a*C+N(d))/(b.a*C+N(b))));for(var f=Math.ceil(Math.log(c)/Math.LN2),f=48>=f?1:Math.pow(2,f-48),g=w(c),h=M(g,b);0>h.a||0<P(h,d);)c-=f,g=w(c),h=M(g,b);I(g)&&(g=E());e=Q(e,g);d=L(d,h)}return e}var A=1,H=2,D=3,F=4,G=5,O=6;var R=null,S=null;function T(a,b){this.g=-1;this.g=128;this.h=void 0!==m.Uint8Array?new Uint8Array(128):Array(128);this.j=this.f=0;this.c=[];this.l=a;this.s=[];this.o=ga(b);this.i=!1;this.j=this.f=0;var c;c=this.o;var d=c.length;if(0<d){for(var e=Array(d),f=0;f<d;f++)e[f]=c[f];c=e}else c=[];this.c=c;this.i=!1}q(T,ba);for(var ja=[],U=0;127>U;U++)ja[U]=0;var ka=function(a){return Array.prototype.concat.apply(Array.prototype,arguments)}([128],ja);\nfunction V(a,b,c){c=void 0!==c?c:b.length;if(a.i)throw Error(\"this hasher needs to be reset\");var d=a.f;if(\"string\"==typeof b)for(var e=0;e<c;e++){var f=b.charCodeAt(e);if(255<f)throw Error(\"Characters must be in range [0,255]\");a.h[d++]=f;d==a.g&&(W(a),d=0)}else if(\"array\"==aa(b))for(e=0;e<c;e++){f=b[e];if(\"number\"!=typeof f||0>f||255<f||f!=(f|0))throw Error(\"message must be a byte array\");a.h[d++]=f;d==a.g&&(W(a),d=0)}else throw Error(\"message must be string or array\");a.f=d;a.j+=c}\nfunction W(a){for(var b=a.h,c=a.s,d=0;16>d;d++){var e=8*d;c[d]=new r(b[e+4]<<24|b[e+5]<<16|b[e+6]<<8|b[e+7],b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3])}for(d=16;80>d;d++){var e=c[d-15],b=e.b,e=e.a,f=c[d-2],g=f.b,f=f.a;c[d]=a.m(c[d-16],c[d-7],new r(b>>>1^e<<31^b>>>8^e<<24^b>>>7^e<<25,e>>>1^b<<31^e>>>8^b<<24^e>>>7),new r(g>>>19^f<<13^f>>>29^g<<3^g>>>6^f<<26,f>>>19^g<<13^g>>>29^f<<3^f>>>6))}for(var b=a.c[0],e=a.c[1],g=a.c[2],f=a.c[3],h=a.c[4],n=a.c[5],p=a.c[6],v=a.c[7],d=0;80>d;d++)var l=b.b,k=b.a,l=Q(new r(l>>>\n28^k<<4^k>>>2^l<<30^k>>>7^l<<25,k>>>28^l<<4^l>>>2^k<<30^l>>>7^k<<25),new r(b.b&e.b|e.b&g.b|b.b&g.b,b.a&e.a|e.a&g.a|b.a&g.a)),k=h.b,x=h.a,ha=h.b,ia=h.a,k=a.m(v,new r(k>>>14^x<<18^k>>>18^x<<14^x>>>9^k<<23,x>>>14^k<<18^x>>>18^k<<14^k>>>9^x<<23),new r(ha&n.b|~ha&p.b,ia&n.a|~ia&p.a),la[d],c[d]),v=p,p=n,n=h,h=Q(f,k),f=g,g=e,e=b,b=Q(k,l);a.c[0]=Q(a.c[0],b);a.c[1]=Q(a.c[1],e);a.c[2]=Q(a.c[2],g);a.c[3]=Q(a.c[3],f);a.c[4]=Q(a.c[4],h);a.c[5]=Q(a.c[5],n);a.c[6]=Q(a.c[6],p);a.c[7]=Q(a.c[7],v)}\nT.prototype.m=function(a,b,c){for(var d=(a.b^2147483648)+(b.b^2147483648),e=a.a+b.a,f=arguments.length-1;2<=f;--f)d+=arguments[f].b^2147483648,e+=arguments[f].a;arguments.length&1&&(d+=2147483648);e+=arguments.length>>1;e+=Math.floor(d/4294967296);return new r(d,e)};function ga(a){for(var b=[],c=0;c<a.length;c+=2)b.push(new r(a[c+1],a[c]));return b}\nvar la=ga([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,\n1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,\n1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,\n289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function ma(){T.call(this,6,na)}q(ma,T);var na=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428];function oa(a){var b=new ma;V(b,a);if(b.i)throw Error(\"this hasher needs to be reset\");a=8*b.j;112>b.f?V(b,ka,112-b.f):V(b,ka,b.g-b.f+112);for(var c=127;112<=c;c--)b.h[c]=a&255,a/=256;W(b);var d=0;a=Array(8*b.l);for(c=0;c<b.l;c++){for(var e=b.c[c],f=e.a,e=e.b,g=24;0<=g;g-=8)a[d++]=f>>g&255;for(g=24;0<=g;g-=8)a[d++]=e>>g&255}b.i=!0;if(!R)for(R={},S={},b=0;65>b;b++)R[b]=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".charAt(b),S[b]=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.\".charAt(b);\nb=S;c=[];for(d=0;d<a.length;d+=3){var h=a[d],n=(f=d+1<a.length)?a[d+1]:0,p=(e=d+2<a.length)?a[d+2]:0,g=h>>2,h=(h&3)<<4|n>>4,n=(n&15)<<2|p>>6,p=p&63;e||(p=64,f||(n=64));c.push(b[g],b[h],b[n],b[p])}return c.join(\"\")}var X=[\"ampSha384\"],Y=window||m;X[0]in Y||!Y.execScript||Y.execScript(\"var \"+X[0]);for(var Z;X.length&&(Z=X.shift());)X.length||void 0===oa?Y[Z]?Y=Y[Z]:Y=Y[Z]={}:Y[Z]=oa;;export function sha384Base64(input) { return ampSha384(input) }\n"]}